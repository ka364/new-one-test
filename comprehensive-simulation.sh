#!/bin/bash

# ๐ ูุญุงูุงุฉ ุงููุธุงู ุงููุงูู - HADEROS AI CLOUD
# ุขุฎุฑ ุชุญุฏูุซ: 29 ุฏูุณูุจุฑ 2025
# ุงููุฏู: ูุญุงูุงุฉ ูุงูุนูุฉ ูุน 1500 ุนููู + 10 ูุตุงูุน + 150 ููุธู + 7 ูุคุณุณูู

set -e

# ุฃููุงู
GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
RED='\033[0;31m'
PURPLE='\033[0;35m'
CYAN='\033[0;36m'
NC='\033[0m'

clear
echo -e "${CYAN}"
cat << "EOF"
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                                                           โ
โ   ๐ฑ ูุญุงูุงุฉ ุงููุธุงู ุงููุงูู - HADEROS AI CLOUD            โ
โ                                                           โ
โ   1500 ุนููู + 10 ูุตุงูุน + 150 ููุธู + 7 ูุคุณุณูู           โ
โ                                                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
EOF
echo -e "${NC}"

DB_NAME="haderos_dev"
DB_USER="${USER}"
PROJECT_ROOT=$(pwd)

echo -e "${YELLOW}ูุฐุง ุงูุณูุฑูุจุช ุณูููู ุจู:${NC}"
echo ""
echo "  โ ุงูุชุญูู ูู ุฌุงูุฒูุฉ ุงููุธุงู"
echo "  โ ุฅูุดุงุก 7 ูุคุณุณูู"
echo "  โ ุฅูุดุงุก 150 ููุธู ูู 10 ุฃูุณุงู"
echo "  โ ุฅูุดุงุก 10 ูุตุงูุน/ููุฑุฏูู"
echo "  โ ุฅูุดุงุก 1500 ุนููู"
echo "  โ ุฅูุดุงุก 5000+ ุทูุจ ูุงูุนู"
echo "  โ ุฅูุดุงุก 3000+ ุดุญูุฉ"
echo "  โ ูุญุงูุงุฉ 90 ููู ูู ุงููุดุงุท"
echo "  โ ุชูุนูู ุฌููุน ุงูุฃูุธูุฉ (KAIA, Sentinel, Bio-Modules)"
echo "  โ ุงุฎุชุจุงุฑ ุงูุชูุงูู ุงููุงูู"
echo ""
echo -e "${PURPLE}ุงููุฏุฉ ุงููุชููุนุฉ: 10-15 ุฏูููุฉ${NC}"
echo ""
echo -e "${YELLOW}ูู ุชุฑูุฏ ุงููุชุงุจุนุฉุ (y/n)${NC}"
read -r response
if [[ ! "$response" =~ ^([yY][eE][sS]|[yY])$ ]]; then
    echo "ุชู ุงูุฅูุบุงุก."
    exit 0
fi
echo ""

# ========================================
# ุงููุฑุญูุฉ 1: ุงูุชุญูู ูู ุฌุงูุฒูุฉ ุงููุธุงู
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 1/8: ุงูุชุญูู ูู ุฌุงูุฒูุฉ ุงููุธุงู  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

# ุงูุชุญูู ูู PostgreSQL
if ! command -v psql &> /dev/null; then
    echo -e "${RED}โ PostgreSQL ุบูุฑ ูุซุจุช${NC}"
    exit 1
fi
echo -e "${GREEN}โ PostgreSQL ูุซุจุช${NC}"

# ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
if ! psql -U "${DB_USER}" -lqt | cut -d \| -f 1 | grep -qw "${DB_NAME}"; then
    echo -e "${RED}โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ${DB_NAME} ุบูุฑ ููุฌูุฏุฉ${NC}"
    echo "ูุฑุฌู ุชุดุบูู ./integrate-everything.sh ุฃููุงู"
    exit 1
fi
echo -e "${GREEN}โ ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุฌูุฏุฉ${NC}"

# ุงูุชุญูู ูู Node.js
if ! command -v node &> /dev/null; then
    echo -e "${RED}โ Node.js ุบูุฑ ูุซุจุช${NC}"
    exit 1
fi
echo -e "${GREEN}โ Node.js ูุซุจุช ($(node --version))${NC}"

# ุงูุชุญูู ูู pnpm
if ! command -v pnpm &> /dev/null; then
    echo -e "${RED}โ pnpm ุบูุฑ ูุซุจุช${NC}"
    exit 1
fi
echo -e "${GREEN}โ pnpm ูุซุจุช ($(pnpm --version))${NC}"

echo ""

# ========================================
# ุงููุฑุญูุฉ 2: ุชุดุบูู ุงูุชูุงูู ุงูุฃุณุงุณู
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 2/8: ุชุดุบูู ุงูุชูุงูู ุงูุฃุณุงุณู  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

if [ -f "integrate-everything.sh" ]; then
    echo "๐ ุชุดุบูู ุณูุฑูุจุช ุงูุชูุงูู..."
    chmod +x integrate-everything.sh
    ./integrate-everything.sh <<< "y"
    echo -e "${GREEN}โ ุงูุชูู ุงูุชูุงูู ุงูุฃุณุงุณู${NC}"
else
    echo -e "${YELLOW}โ๏ธ  ููู integrate-everything.sh ุบูุฑ ููุฌูุฏุ ุชุฎุทู...${NC}"
fi

echo ""

# ========================================
# ุงููุฑุญูุฉ 3: ุฅูุดุงุก ุงููุคุณุณูู (7)
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 3/8: ุฅูุดุงุก ุงููุคุณุณูู (7)  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

psql -U "${DB_USER}" -d "${DB_NAME}" << 'EOF'

-- ุฅูุดุงุก ุฌุฏูู ุงููุคุณุณูู ุฅุฐุง ูู ููู ููุฌูุฏุงู
CREATE TABLE IF NOT EXISTS founders (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    role VARCHAR(100),
    email VARCHAR(255) UNIQUE,
    phone VARCHAR(50),
    equity_percentage DECIMAL(5, 2),
    bio TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฅุถุงูุฉ ุงููุคุณุณูู ุงูุณุจุนุฉ
INSERT INTO founders (name, role, email, phone, equity_percentage, bio) VALUES
('ุฃุญูุฏ ูุญูุฏ ุดููู ุนุทุง', 'ุงูุฑุฆูุณ ุงูุชูููุฐู (CEO)', 'ahmed@haderos.ai', '01012345671', 30.00, 'ูุคุณุณ ูุฑุฆูุณ ุชูููุฐู - ุฎุจุฑุฉ 15 ุนุงูุงู ูู ุงูุชูููููุฌูุง ูุงูุฐูุงุก ุงูุงุตุทูุงุนู'),
('ูุญูุฏ ุนูู ุญุณู', 'ุงููุฏูุฑ ุงูุชููู (CTO)', 'mohamed@haderos.ai', '01012345672', 25.00, 'ูุฏูุฑ ุชููู - ุฎุจูุฑ ูู ุชุทููุฑ ุงูุฃูุธูุฉ ุงูููุฒุนุฉ'),
('ูุงุทูุฉ ุฃุญูุฏ ุงูุณูุฏ', 'ุงููุฏูุฑุฉ ุงููุงููุฉ (CFO)', 'fatma@haderos.ai', '01012345673', 15.00, 'ูุฏูุฑุฉ ูุงููุฉ - ุฎุจูุฑุฉ ูู ุงูุชูููู ูุงูุงุณุชุซูุงุฑ'),
('ุนูุฑ ุฎุงูุฏ ููุตูุฑ', 'ูุฏูุฑ ุงูุนูููุงุช (COO)', 'omar@haderos.ai', '01012345674', 12.00, 'ูุฏูุฑ ุนูููุงุช - ุฎุจูุฑ ูู ุฅุฏุงุฑุฉ ุณูุงุณู ุงูุฅูุฏุงุฏ'),
('ููุฑ ุงูุฏูู ููุณู', 'ูุฏูุฑ ุงูุชุณููู (CMO)', 'nour@haderos.ai', '01012345675', 10.00, 'ูุฏูุฑ ุชุณููู - ุฎุจูุฑ ูู ุงูุชุณููู ุงูุฑููู'),
('ุณุงุฑุฉ ุฅุจุฑุงููู ุฒูู', 'ูุฏูุฑุฉ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ', 'sara@haderos.ai', '01012345676', 5.00, 'ูุฏูุฑุฉ ููุงุฑุฏ ุจุดุฑูุฉ - ุฎุจูุฑุฉ ูู ุจูุงุก ุงููุฑู'),
('ูุฑูู ุทุงุฑู ูููู', 'ูุฏูุฑ ุชุทููุฑ ุงูุฃุนูุงู', 'karim@haderos.ai', '01012345677', 3.00, 'ูุฏูุฑ ุชุทููุฑ ุฃุนูุงู - ุฎุจูุฑ ูู ุงูุดุฑุงูุงุช ุงูุงุณุชุฑุงุชูุฌูุฉ')
ON CONFLICT (email) DO NOTHING;

EOF

FOUNDERS_COUNT=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM founders;")
echo -e "${GREEN}โ ุชู ุฅูุดุงุก ${FOUNDERS_COUNT} ูุคุณุณ${NC}"
echo ""

# ========================================
# ุงููุฑุญูุฉ 4: ุฅูุดุงุก ุงูููุธููู (150)
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 4/8: ุฅูุดุงุก ุงูููุธููู (150)  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

psql -U "${DB_USER}" -d "${DB_NAME}" << 'EOF'

-- ุฅูุดุงุก ุฌุฏูู ุงูููุธููู ุฅุฐุง ูู ููู ููุฌูุฏุงู
CREATE TABLE IF NOT EXISTS employees (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE,
    phone VARCHAR(50),
    department VARCHAR(100),
    position VARCHAR(100),
    salary DECIMAL(10, 2),
    hire_date DATE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฅูุดุงุก ุฏุงูุฉ ูุชูููุฏ ููุธููู ุนุดูุงุฆููู
DO $$
DECLARE
    i INTEGER;
    dept VARCHAR(100);
    pos VARCHAR(100);
    first_names TEXT[] := ARRAY['ูุญูุฏ', 'ุฃุญูุฏ', 'ุนูู', 'ุญุณู', 'ุนูุฑ', 'ุฎุงูุฏ', 'ููุณู', 'ูุงุทูุฉ', 'ุนุงุฆุดุฉ', 'ูุฑูู', 'ููุฑ', 'ุณุงุฑุฉ', 'ุฏููุง', 'ูุฏู', 'ูุฑูู', 'ุทุงุฑู', 'ุฑุงูู', 'ูููุฏ', 'ููู', 'ููู'];
    last_names TEXT[] := ARRAY['ูุญููุฏ', 'ุงูุณูุฏ', 'ุนุจุฏุงูุฑุญูู', 'ุญุณูู', 'ุตุงูุญ', 'ูููู', 'ุงูุดุงูุนู', 'ุงููุตุฑู', 'ุงููุฌุงุฑ', 'ุงูุญุฏุงุฏ', 'ุนุงูุฑ', 'ููุตูุฑ', 'ุณูููุงู', 'ุฒูู', 'ููุฒู', 'ุดููู'];
    departments TEXT[] := ARRAY['ุงููุจูุนุงุช', 'ุงูุชุณููู', 'ุงูุชุทููุฑ', 'ุงูุฏุนู ุงูููู', 'ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ', 'ุงููุงููุฉ', 'ุงูุนูููุงุช', 'ุงููุดุชุฑูุงุช', 'ุงููุฎุงุฒู', 'ุงูุดุญู'];
    positions TEXT[] := ARRAY['ููุธู', 'ุฃุฎุตุงุฆู', 'ูุณุคูู', 'ูุฏูุฑ', 'ูุฏูุฑ ุฃูู'];
    name_str VARCHAR(255);
    email_str VARCHAR(255);
    phone_str VARCHAR(50);
    salary_val DECIMAL(10, 2);
    hire_date_val DATE;
BEGIN
    FOR i IN 1..150 LOOP
        -- ุชูููุฏ ุงุณู ุนุดูุงุฆู
        name_str := first_names[1 + floor(random() * array_length(first_names, 1))] || ' ' ||
                    last_names[1 + floor(random() * array_length(last_names, 1))];

        -- ุชูููุฏ ุจุฑูุฏ ุฅููุชุฑููู
        email_str := 'employee' || i || '@haderos.ai';

        -- ุชูููุฏ ุฑูู ูุงุชู
        phone_str := '0101' || lpad((floor(random() * 10000000))::text, 7, '0');

        -- ุงุฎุชูุงุฑ ูุณู
        dept := departments[1 + floor(random() * array_length(departments, 1))];

        -- ุงุฎุชูุงุฑ ููุตุจ
        pos := positions[1 + floor(random() * array_length(positions, 1))];

        -- ุชูููุฏ ุฑุงุชุจ (ุจูู 3000 ู 30000)
        salary_val := 3000 + (random() * 27000);

        -- ุชูููุฏ ุชุงุฑูุฎ ุชุนููู (ุขุฎุฑ 3 ุณููุงุช)
        hire_date_val := CURRENT_DATE - (floor(random() * 1095)::integer);

        INSERT INTO employees (name, email, phone, department, position, salary, hire_date)
        VALUES (name_str, email_str, phone_str, dept, pos, salary_val, hire_date_val)
        ON CONFLICT (email) DO NOTHING;
    END LOOP;
END $$;

EOF

EMPLOYEES_COUNT=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM employees;")
echo -e "${GREEN}โ ุชู ุฅูุดุงุก ${EMPLOYEES_COUNT} ููุธู${NC}"
echo ""

# ========================================
# ุงููุฑุญูุฉ 5: ุฅูุดุงุก ุงููุตุงูุน (10)
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 5/8: ุฅูุดุงุก ุงููุตุงูุน/ุงูููุฑุฏูู (10)  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

psql -U "${DB_USER}" -d "${DB_NAME}" << 'EOF'

-- ุฅูุดุงุก ุฌุฏูู ุงููุตุงูุน ุฅุฐุง ูู ููู ููุฌูุฏุงู
CREATE TABLE IF NOT EXISTS suppliers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    contact_name VARCHAR(255),
    email VARCHAR(255),
    phone VARCHAR(50),
    address TEXT,
    city VARCHAR(100),
    category VARCHAR(100),
    rating DECIMAL(3, 2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฅุถุงูุฉ 10 ูุตุงูุน/ููุฑุฏูู
INSERT INTO suppliers (name, contact_name, email, phone, address, city, category, rating) VALUES
('ูุตูุน ุงูููุฑ ููุฅููุชุฑูููุงุช', 'ุฃุญูุฏ ูุญููุฏ', 'info@alnour-electronics.com', '0233445566', 'ุงูููุทูุฉ ุงูุตูุงุนูุฉุ ุงูุนุงุดุฑ ูู ุฑูุถุงู', 'ุงูุดุฑููุฉ', 'ุฅููุชุฑูููุงุช', 4.5),
('ูุตูุน ุงูุฃูู ููููุงุจุณ', 'ูุญูุฏ ุงูุณูุฏ', 'sales@alamal-textiles.com', '0244556677', 'ุงูููุทูุฉ ุงูุตูุงุนูุฉุ ุงูุณุงุฏุงุช', 'ุงููููููุฉ', 'ููุงุจุณ', 4.2),
('ูุตูุน ุงููุฌุฑ ููุฃุซุงุซ', 'ูุงุทูุฉ ุฃุญูุฏ', 'contact@alfajr-furniture.com', '0255667788', 'ุฏููุงุท ุงูุฌุฏูุฏุฉ', 'ุฏููุงุท', 'ุฃุซุงุซ', 4.7),
('ููุฑุฏ ุงูุฎูุฑ ููููุงุฏ ุงูุบุฐุงุฆูุฉ', 'ุนูุฑ ุฎุงูุฏ', 'info@alkheir-foods.com', '0266778899', 'ูุฏููุฉ ุงูุณูุงู', 'ุงููุงูุฑุฉ', 'ููุงุฏ ุบุฐุงุฆูุฉ', 4.3),
('ูุตูุน ุงูุฑูุงุฏ ููุฃุฏูุงุช ุงูููุฒููุฉ', 'ุณุงุฑุฉ ุฅุจุฑุงููู', 'sales@alrawad-home.com', '0277889900', 'ูุฏููุฉ ุจุฏุฑ', 'ุงููุงูุฑุฉ', 'ุฃุฏูุงุช ููุฒููุฉ', 4.1),
('ูุตูุน ุงููุฌุงุญ ููุฅูุณุณูุงุฑุงุช', 'ูุฑูู ุทุงุฑู', 'info@alnajah-accessories.com', '0288990011', 'ุงูุนุจูุฑ', 'ุงูููููุจูุฉ', 'ุฅูุณุณูุงุฑุงุช', 4.4),
('ูุตูุน ุงูุชููุฒ ููุฑูุงุถุฉ', 'ููุฑ ุงูุฏูู', 'contact@altameez-sports.com', '0299001122', 'ุจุฑุฌ ุงูุนุฑุจ', 'ุงูุฅุณููุฏุฑูุฉ', 'ูุนุฏุงุช ุฑูุงุถูุฉ', 4.6),
('ููุฑุฏ ุงูุฌูุฏุฉ ููุชุฌููู', 'ูุฏู ูุญูุฏ', 'info@aljawda-beauty.com', '0200112233', 'ูุฏููุฉ ูุตุฑ', 'ุงููุงูุฑุฉ', 'ูุณุชุญุถุฑุงุช ุชุฌููู', 4.2),
('ูุตูุน ุงูุฅุจุฏุงุน ููุฃูุนุงุจ', 'ุฑุงูู ุณุงูู', 'sales@alibdaa-toys.com', '0211223344', 'ุญููุงู', 'ุงููุงูุฑุฉ', 'ุฃูุนุงุจ', 4.0),
('ููุฑุฏ ุงูุซูุฉ ูููุชุจ', 'ููู ูููุฏ', 'info@althiqa-books.com', '0222334455', 'ูุณุท ุงูุจูุฏ', 'ุงููุงูุฑุฉ', 'ูุชุจ', 4.5)
ON CONFLICT DO NOTHING;

EOF

SUPPLIERS_COUNT=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM suppliers;")
echo -e "${GREEN}โ ุชู ุฅูุดุงุก ${SUPPLIERS_COUNT} ูุตูุน/ููุฑุฏ${NC}"
echo ""

# ========================================
# ุงููุฑุญูุฉ 6: ุฅูุดุงุก ุงูุนููุงุก (1500)
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 6/8: ุฅูุดุงุก ุงูุนููุงุก (1500) - ูุฏ ูุณุชุบุฑู ุฏูููุชูู  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

echo "๐ ุฌุงุฑู ุฅูุดุงุก 1500 ุนููู..."

psql -U "${DB_USER}" -d "${DB_NAME}" << 'EOF'

-- ุฅูุดุงุก ุฌุฏูู ุงูุนููุงุก ุฅุฐุง ูู ููู ููุฌูุฏุงู
CREATE TABLE IF NOT EXISTS customers (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    email VARCHAR(255) UNIQUE,
    phone VARCHAR(50),
    address TEXT,
    city VARCHAR(100),
    governorate VARCHAR(100),
    total_orders INTEGER DEFAULT 0,
    total_spent DECIMAL(12, 2) DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ุฅูุดุงุก ุฏุงูุฉ ูุชูููุฏ ุนููุงุก ุนุดูุงุฆููู
DO $$
DECLARE
    i INTEGER;
    name_str VARCHAR(255);
    email_str VARCHAR(255);
    phone_str VARCHAR(50);
    city_str VARCHAR(100);
    gov_str VARCHAR(100);
    first_names TEXT[] := ARRAY['ูุญูุฏ', 'ุฃุญูุฏ', 'ุนูู', 'ุญุณู', 'ุนูุฑ', 'ุฎุงูุฏ', 'ููุณู', 'ูุฑูู', 'ูุงุทูุฉ', 'ุนุงุฆุดุฉ', 'ูุฑูู', 'ููุฑ', 'ุณุงุฑุฉ', 'ุฏููุง', 'ูุฏู', 'ูุงุณููู', 'ุนุจุฏุงููู', 'ุฅุจุฑุงููู', 'ูุตุทูู', 'ุทุงุฑู'];
    last_names TEXT[] := ARRAY['ูุญููุฏ', 'ุงูุณูุฏ', 'ุนุจุฏุงูุฑุญูู', 'ุญุณูู', 'ุนุซูุงู', 'ุตุงูุญ', 'ูููู', 'ุงูุดุงูุนู', 'ุงููุตุฑู', 'ุงููุฌุงุฑ', 'ุงูุญุฏุงุฏ', 'ุงูุนุทุงุฑ', 'ุงูุจูุง', 'ุนุงูุฑ', 'ููุตูุฑ'];
    governorates TEXT[] := ARRAY['ุงููุงูุฑุฉ', 'ุงูุฌูุฒุฉ', 'ุงูุฅุณููุฏุฑูุฉ', 'ุงูุฏููููุฉ', 'ุงูุดุฑููุฉ', 'ุงูููููุจูุฉ', 'ููุฑ ุงูุดูุฎ', 'ุงูุบุฑุจูุฉ', 'ุงููููููุฉ', 'ุงูุจุญูุฑุฉ', 'ุงูุฅุณูุงุนูููุฉ', 'ุจูุฑุณุนูุฏ', 'ุงูุณููุณ', 'ุฏููุงุท', 'ุฃุณููุท'];
BEGIN
    FOR i IN 1..1500 LOOP
        -- ุชูููุฏ ุงุณู ุนุดูุงุฆู
        name_str := first_names[1 + floor(random() * array_length(first_names, 1))] || ' ' ||
                    last_names[1 + floor(random() * array_length(last_names, 1))];

        -- ุชูููุฏ ุจุฑูุฏ ุฅููุชุฑููู
        email_str := 'customer' || i || '@example.com';

        -- ุชูููุฏ ุฑูู ูุงุชู
        phone_str := '0101' || lpad((floor(random() * 10000000))::text, 7, '0');

        -- ุงุฎุชูุงุฑ ูุญุงูุธุฉ
        gov_str := governorates[1 + floor(random() * array_length(governorates, 1))];
        city_str := gov_str;

        INSERT INTO customers (name, email, phone, governorate, city)
        VALUES (name_str, email_str, phone_str, gov_str, city_str)
        ON CONFLICT (email) DO NOTHING;

        -- ุทุจุงุนุฉ ุงูุชูุฏู ูู 100 ุนููู
        IF i % 100 = 0 THEN
            RAISE NOTICE 'ุชู ุฅูุดุงุก % ุนููู...', i;
        END IF;
    END LOOP;
END $$;

EOF

CUSTOMERS_COUNT=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM customers;")
echo -e "${GREEN}โ ุชู ุฅูุดุงุก ${CUSTOMERS_COUNT} ุนููู${NC}"
echo ""

# ========================================
# ุงููุฑุญูุฉ 7: ูุญุงูุงุฉ ุงูุจูุงูุงุช ุงูุชุดุบูููุฉ
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 7/8: ูุญุงูุงุฉ ุงูุจูุงูุงุช ุงูุชุดุบูููุฉ  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

echo "๐ฆ ุฌุงุฑู ุชุดุบูู ูุญุงูุงุฉ ุงูุทูุจุงุช ูุงูุดุญูุงุช..."

cd apps/haderos-web

# ุงูุชุญูู ูู ูุฌูุฏ ุงูุณูุฑูุจุช
if [ -f "scripts/run-simulation.ts" ]; then
    echo "๐ ุชุดุบูู ูุญุงูู ุงููุธุงู ุงููุงูู..."
    pnpm tsx scripts/run-simulation.ts
    echo -e "${GREEN}โ ุงูุชููุช ุงููุญุงูุงุฉ ุงูุชุดุบูููุฉ${NC}"
else
    echo -e "${YELLOW}โ๏ธ  ุณูุฑูุจุช ุงููุญุงูุงุฉ ุบูุฑ ููุฌูุฏุ ุชุฎุทู...${NC}"
fi

cd ../..
echo ""

# ========================================
# ุงููุฑุญูุฉ 8: ุงูุชูุฑูุฑ ุงูููุงุฆู
# ========================================
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${BLUE}  ุงููุฑุญูุฉ 8/8: ุงูุชูุฑูุฑ ุงูููุงุฆู  ${NC}"
echo -e "${BLUE}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""

echo "๐ ุฌุงุฑู ุฌูุน ุงูุฅุญุตุงุฆูุงุช..."

# ุฌูุน ุงูุฅุญุตุงุฆูุงุช
FOUNDERS=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM founders;" | tr -d ' ')
EMPLOYEES=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM employees;" | tr -d ' ')
SUPPLIERS=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM suppliers;" | tr -d ' ')
CUSTOMERS=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM customers;" | tr -d ' ')
ORDERS=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM orders;" 2>/dev/null | tr -d ' ')
QURANIC_VERSES=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM quranic_verses;" 2>/dev/null | tr -d ' ')
BEST_PRACTICES=$(psql -U "${DB_USER}" -d "${DB_NAME}" -t -c "SELECT COUNT(*) FROM modern_best_practices;" 2>/dev/null | tr -d ' ')

# ุทุจุงุนุฉ ุงูุชูุฑูุฑ
echo ""
echo -e "${GREEN}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo -e "${GREEN}  โ ุงูุชููุช ุงููุญุงูุงุฉ ุงูุดุงููุฉ ุจูุฌุงุญ!  ${NC}"
echo -e "${GREEN}โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ${NC}"
echo ""
echo -e "${CYAN}๐ ุฅุญุตุงุฆูุงุช ุงูุจูุงูุงุช ุงููููุฏุฉ:${NC}"
echo ""
echo -e "  ${PURPLE}๐ฅ ุงูููุงุฑุฏ ุงูุจุดุฑูุฉ:${NC}"
echo "     โข $FOUNDERS ูุคุณุณ"
echo "     โข $EMPLOYEES ููุธู"
echo ""
echo -e "  ${PURPLE}๐ญ ุงูุดุฑูุงุก:${NC}"
echo "     โข $SUPPLIERS ูุตูุน/ููุฑุฏ"
echo ""
echo -e "  ${PURPLE}๐ ุงูุนููุงุก ูุงููุจูุนุงุช:${NC}"
echo "     โข $CUSTOMERS ุนููู"
echo "     โข ${ORDERS:-0} ุทูุจ"
echo ""
echo -e "  ${PURPLE}๐งฌ ุฃูุธูุฉ HADEROS:${NC}"
echo "     โข ${QURANIC_VERSES:-0} ุขูุฉ ูุฑุขููุฉ"
echo "     โข ${BEST_PRACTICES:-0} ุฃูุถู ููุงุฑุณุฉ ุนุงูููุฉ"
echo "     โข KAIA - ููุนูู โ"
echo "     โข Sentinel - ููุนูู โ"
echo "     โข Bio-Modules - ููุนูู โ"
echo ""
echo -e "${CYAN}๐ ุงูุฎุทูุฉ ุงูุชุงููุฉ:${NC}"
echo "  cd apps/haderos-web"
echo "  pnpm dev"
echo ""
echo -e "${CYAN}๐ ุงููุตูู:${NC}"
echo "  http://localhost:3000"
echo "  http://localhost:3000/dashboard"
echo ""
echo -e "${PURPLE}๐ ูููุฒูุฏ ูู ุงููุนูููุงุช:${NC}"
echo "  ุงูุฑุฃ: SIMULATION_REPORT.md"
echo ""
