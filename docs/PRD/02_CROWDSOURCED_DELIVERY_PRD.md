# Product Requirements Document (PRD)
# Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¨Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± - Crowdsourced Delivery System

---

## ğŸ“‹ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø³ØªÙ†Ø¯

| Ø§Ù„Ø¨Ù†Ø¯ | Ø§Ù„Ù‚ÙŠÙ…Ø© |
|-------|--------|
| **Ø±Ù‚Ù… Ø§Ù„Ù…Ø³ØªÙ†Ø¯** | PRD-HADEROS-CD-002 |
| **Ø§Ù„Ø¥ØµØ¯Ø§Ø±** | 1.0 |
| **ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡** | 2 ÙŠÙ†Ø§ÙŠØ± 2026 |
| **Ø§Ù„Ø­Ø§Ù„Ø©** | Ù…Ø³ÙˆØ¯Ø© Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© |
| **Ø§Ù„Ù…Ø¤Ù„Ù** | ÙØ±ÙŠÙ‚ HADEROS |

---

## 1. Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø© (Overview)

### 1.1 Ù…Ù„Ø®Øµ ØªÙ†ÙÙŠØ°ÙŠ
Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¨Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± (Crowdsourced Delivery) ÙŠØªÙŠØ­ Ù„Ø£ÙŠ Ø´Ø®Øµ ÙŠÙ…ØªÙ„Ùƒ ÙˆØ³ÙŠÙ„Ø© Ù†Ù‚Ù„ Ø£Ù† ÙŠØµØ¨Ø­ Ù…Ù†Ø¯ÙˆØ¨ ØªÙˆØµÙŠÙ„ Ù…Ø³ØªÙ‚Ù„. ÙŠÙ‡Ø¯Ù Ø§Ù„Ù†Ø¸Ø§Ù… Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© "Ø§Ù„Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®ÙŠØ±" (Last-Mile Delivery) ÙÙŠ Ù…ØµØ± Ù…Ù† Ø®Ù„Ø§Ù„ Ø´Ø¨ÙƒØ© Ù…ÙˆØ²Ø¹Ø© Ù…Ù† Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† Ø§Ù„Ù…Ø³ØªÙ‚Ù„ÙŠÙ†.

### 1.2 Ø§Ù„Ø±Ø¤ÙŠØ©
"ØªÙˆØµÙŠÙ„ Ø£Ø³Ø±Ø¹ ÙˆØ£Ø±Ø®Øµ Ù„ÙƒÙ„ Ù…ØµØ±ÙŠØŒ ÙˆÙØ±ØµØ© Ø¯Ø®Ù„ Ù„ÙƒÙ„ Ù…Ù† ÙŠÙ…Ù„Ùƒ ÙˆØ³ÙŠÙ„Ø© Ù†Ù‚Ù„"

### 1.3 Ø§Ù„Ù…Ø´ÙƒÙ„Ø§Øª Ø§Ù„ØªÙŠ Ù†Ø­Ù„Ù‡Ø§

| Ø§Ù„Ù…Ø´ÙƒÙ„Ø© | Ø§Ù„Ø­Ù„ |
|---------|------|
| Ø§Ø±ØªÙØ§Ø¹ ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ø­Ù† | ØªÙƒÙ„ÙØ© Ø£Ù‚Ù„ 30-40% Ù…Ù† Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠØ© |
| Ø¨Ø·Ø¡ Ø§Ù„ØªÙˆØµÙŠÙ„ (2-5 Ø£ÙŠØ§Ù…) | ØªÙˆØµÙŠÙ„ Ù†ÙØ³ Ø§Ù„ÙŠÙˆÙ… Ø£Ùˆ Ø®Ù„Ø§Ù„ Ø³Ø§Ø¹Ø§Øª |
| Ø¹Ø¯Ù… ØªØºØ·ÙŠØ© Ø¨Ø¹Ø¶ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ | Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù…Ø­Ù„ÙŠÙŠÙ† ÙŠØ¹Ø±ÙÙˆÙ† ÙƒÙ„ Ù…Ù†Ø·Ù‚Ø© |
| Ø¨Ø·Ø§Ù„Ø© Ø§Ù„Ø´Ø¨Ø§Ø¨ | ÙØ±Øµ Ø¹Ù…Ù„ Ù…Ø±Ù†Ø© |
| Ø°Ø±ÙˆØ© Ø§Ù„Ø·Ù„Ø¨ | Ù…Ø±ÙˆÙ†Ø© ÙÙŠ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† |

### 1.4 Ø§Ù„Ø¬Ù…Ù‡ÙˆØ± Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù

**Ø§Ù„Ø³Ø§Ø¦Ù‚ÙˆÙ† (Drivers):**
| Ø§Ù„Ø´Ø±ÙŠØ­Ø© | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ø§ÙØ² |
|---------|-------|--------|
| Ø·Ù„Ø§Ø¨ Ø§Ù„Ø¬Ø§Ù…Ø¹Ø§Øª | ÙˆÙ‚Øª ÙØ±Ø§ØºØŒ ÙŠØ­ØªØ§Ø¬ÙˆÙ† Ø¯Ø®Ù„ | Ù…Ø±ÙˆÙ†Ø© + Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ |
| Ø³Ø§Ø¦Ù‚Ùˆ Ø§Ù„ØªØ§ÙƒØ³ÙŠ/Ø£ÙˆØ¨Ø± | Ù„Ø¯ÙŠÙ‡Ù… Ø³ÙŠØ§Ø±Ø§ØªØŒ Ø£ÙˆÙ‚Ø§Øª ÙØ±Ø§Øº | Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ |
| Ø¹Ù…Ø§Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„ | Ø®Ø¨Ø±Ø© ÙÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„ | Ø¯Ø®Ù„ Ø£ÙØ¶Ù„ |
| Ø£ØµØ­Ø§Ø¨ Ø§Ù„Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„Ø§Øª | Ø´Ø¨Ø§Ø¨ØŒ Ø³Ø±Ø¹Ø© | Ø¯Ø®Ù„ Ø«Ø§Ø¨Øª |
| Ø±Ø¨Ø§Øª Ø§Ù„Ø¨ÙŠÙˆØª | Ù„Ø¯ÙŠÙ‡Ù† Ø³ÙŠØ§Ø±Ø§Øª | Ø¯Ø®Ù„ Ø¥Ø¶Ø§ÙÙŠ Ø¨Ø¯ÙˆØ§Ù… Ø¬Ø²Ø¦ÙŠ |

**Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡:**
| Ø§Ù„Ø´Ø±ÙŠØ­Ø© | Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬ |
|---------|----------|
| Ù…ØªØ§Ø¬Ø± E-commerce | ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ |
| Ù…Ø·Ø§Ø¹Ù… | ØªÙˆØµÙŠÙ„ Ø§Ù„Ø·Ø¹Ø§Ù… |
| ØµÙŠØ¯Ù„ÙŠØ§Øª | ØªÙˆØµÙŠÙ„ Ø§Ù„Ø£Ø¯ÙˆÙŠØ© |
| Ø£ÙØ±Ø§Ø¯ | Ø¥Ø±Ø³Ø§Ù„ Ø·Ø±ÙˆØ¯ Ø´Ø®ØµÙŠØ© |

---

## 2. Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ© (Functional Requirements)

### 2.1 Ù†Ø¸Ø§Ù… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†

#### FR-CD-001: ØªØ³Ø¬ÙŠÙ„ Ø³Ø§Ø¦Ù‚ Ø¬Ø¯ÙŠØ¯
**Ø§Ù„ÙˆØµÙ:** Ø¹Ù…Ù„ÙŠØ© ØªØ³Ø¬ÙŠÙ„ ÙˆØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯

**Ø®Ø·ÙˆØ§Øª Ø§Ù„ØªØ³Ø¬ÙŠÙ„:**
```
1. Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
   â”œâ”€â”€ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„
   â”œâ”€â”€ Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (OTP)
   â”œâ”€â”€ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
   â””â”€â”€ ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯

2. Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ§Ù„ØªØ­Ù‚Ù‚
   â”œâ”€â”€ Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ù‚ÙˆÙ…ÙŠ
   â”œâ”€â”€ ØµÙˆØ±Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© (ÙˆØ¬Ù‡ + Ø¸Ù‡Ø±)
   â”œâ”€â”€ ØµÙˆØ±Ø© Ø´Ø®ØµÙŠØ© (Selfie Ù…Ø¹ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©)
   â””â”€â”€ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„ÙˆØ¬Ù‡ (AI)

3. Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
   â”œâ”€â”€ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø© (Ø¯Ø±Ø§Ø¬Ø©/Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„/Ø³ÙŠØ§Ø±Ø©/ÙØ§Ù†)
   â”œâ”€â”€ Ø§Ù„Ù…Ø§Ø±ÙƒØ© ÙˆØ§Ù„Ù…ÙˆØ¯ÙŠÙ„
   â”œâ”€â”€ Ø³Ù†Ø© Ø§Ù„ØµÙ†Ø¹
   â”œâ”€â”€ Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø§Øª
   â”œâ”€â”€ ØµÙˆØ±Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
   â””â”€â”€ Ø±Ø®ØµØ© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© (Ø¥Ù† ÙˆØ¬Ø¯Øª)

4. Ø§Ù„Ù…Ù†Ø·Ù‚Ø© ÙˆØ§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª
   â”œâ”€â”€ Ø§Ù„Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„Ù…ÙØ¶Ù„Ø© Ù„Ù„Ø¹Ù…Ù„
   â”œâ”€â”€ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ù…ÙØ¶Ù„Ø©
   â””â”€â”€ Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù†Ø§Øª Ø§Ù„Ù…ÙØ¶Ù„Ø©

5. Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
   â”œâ”€â”€ Ø±Ù‚Ù… Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ / Ø§Ù„Ù…Ø­ÙØ¸Ø©
   â””â”€â”€ Ø·Ø±ÙŠÙ‚Ø© Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
```

**Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ© (KYC):**
```typescript
interface DriverKYC {
  // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 1: Ø£Ø³Ø§Ø³ÙŠ
  level1: {
    phoneVerified: boolean;      // OTP
    emailVerified: boolean;
    nationalIdProvided: boolean;
  };

  // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 2: Ù…ØªÙˆØ³Ø·
  level2: {
    nationalIdVerified: boolean;  // OCR + Manual review
    selfieMatched: boolean;       // Face matching AI
    addressVerified: boolean;     // Optional
  };

  // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 3: ÙƒØ§Ù…Ù„
  level3: {
    backgroundCheck: boolean;     // Criminal record check
    vehicleVerified: boolean;     // Vehicle ownership
    licenseVerified: boolean;     // If applicable
  };
}

// Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¹Ù…Ù„ Ø­Ø³Ø¨ Ø§Ù„ØªØ­Ù‚Ù‚
const workLevels = {
  level1: {
    canDeliverDocuments: true,
    canDeliverPackages: false,
    maxValuePerDelivery: 500,
    dailyLimit: 10
  },
  level2: {
    canDeliverDocuments: true,
    canDeliverPackages: true,
    maxValuePerDelivery: 5000,
    dailyLimit: 30
  },
  level3: {
    canDeliverDocuments: true,
    canDeliverPackages: true,
    canDeliverHighValue: true,
    maxValuePerDelivery: 50000,
    dailyLimit: 100
  }
};
```

---

#### FR-CD-002: Ø¥Ø¯Ø§Ø±Ø© ØªÙˆÙØ± Ø§Ù„Ø³Ø§Ø¦Ù‚
**Ø§Ù„ÙˆØµÙ:** Ù†Ø¸Ø§Ù… Ù„Ø¥Ø¯Ø§Ø±Ø© Ø­Ø§Ù„Ø© ØªÙˆÙØ± Ø§Ù„Ø³Ø§Ø¦Ù‚

**Ø­Ø§Ù„Ø§Øª Ø§Ù„Ø³Ø§Ø¦Ù‚:**
```typescript
enum DriverStatus {
  OFFLINE = 'offline',           // ØºÙŠØ± Ù…ØªØµÙ„
  ONLINE_AVAILABLE = 'online_available',  // Ù…ØªØµÙ„ ÙˆÙ…ØªØ§Ø­
  ONLINE_BUSY = 'online_busy',   // Ù…ØªØµÙ„ ÙˆÙ…Ø´ØºÙˆÙ„ (ÙÙŠ ØªÙˆØµÙŠÙ„Ø©)
  ON_BREAK = 'on_break',         // ÙÙŠ Ø§Ø³ØªØ±Ø§Ø­Ø©
  SUSPENDED = 'suspended'        // Ù…ÙˆÙ‚ÙˆÙ
}
```

**ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹:**
```typescript
interface LocationUpdate {
  driverId: number;
  lat: number;
  lng: number;
  accuracy: number;        // Ø¨Ø§Ù„Ù…ØªØ±
  speed: number;           // km/h
  heading: number;         // 0-360 degrees
  battery: number;         // Ù†Ø³Ø¨Ø© Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©
  timestamp: Date;
  source: 'gps' | 'network' | 'fused';
}

// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹
const locationSettings = {
  updateInterval: {
    idle: 60000,           // ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø© Ø¹Ù†Ø¯Ù…Ø§ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø·Ù„Ø¨
    assigned: 15000,       // ÙƒÙ„ 15 Ø«Ø§Ù†ÙŠØ© Ø¹Ù†Ø¯ ÙˆØ¬ÙˆØ¯ Ø·Ù„Ø¨
    inTransit: 5000        // ÙƒÙ„ 5 Ø«ÙˆØ§Ù†ÙŠ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙˆØµÙŠÙ„
  },
  accuracyThreshold: 100,  // Ù…ØªØ±
  batteryThreshold: 15     // ØªØ­Ø°ÙŠØ± Ø¹Ù†Ø¯ 15%
};
```

---

### 2.2 Ù†Ø¸Ø§Ù… Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„

#### FR-CD-003: Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„
**Ø§Ù„ÙˆØµÙ:** Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨ ØªÙˆØµÙŠÙ„ Ø¬Ø¯ÙŠØ¯

**Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª:**
```typescript
interface CreateDeliveryRequest {
  // Ù…ØµØ¯Ø± Ø§Ù„Ø·Ù„Ø¨
  source: 'order' | 'merchant' | 'individual';
  sourceId?: number;         // Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ Ø¥Ù† ÙˆØ¬Ø¯

  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
  pickup: {
    address: string;
    addressAr: string;
    lat: number;
    lng: number;
    contactName: string;
    contactPhone: string;
    notes?: string;
    timeWindow?: {
      from: Date;
      to: Date;
    };
  };

  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ³Ù„ÙŠÙ…
  delivery: {
    address: string;
    addressAr: string;
    lat: number;
    lng: number;
    governorate: string;
    city: string;
    contactName: string;
    contactPhone: string;
    notes?: string;
    timeWindow?: {
      from: Date;
      to: Date;
    };
  };

  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø­Ù†Ø©
  package: {
    type: 'document' | 'small_package' | 'medium_package' | 'large_package' | 'fragile' | 'food';
    weight?: number;         // kg
    dimensions?: {
      length: number;
      width: number;
      height: number;
    };
    description: string;
    value?: number;          // Ù„Ù„ØªØ£Ù…ÙŠÙ†
    requiresSignature: boolean;
    isFragile: boolean;
    temperatureControlled: boolean;
  };

  // Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
  options: {
    isExpress: boolean;      // ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹
    scheduledTime?: Date;    // ØªÙˆØµÙŠÙ„ Ù…Ø¬Ø¯ÙˆÙ„
    codAmount?: number;      // Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
    tip?: number;            // Ø¨Ù‚Ø´ÙŠØ´ Ù„Ù„Ø³Ø§Ø¦Ù‚
  };
}
```

**Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙƒÙ„ÙØ©:**
```typescript
async function calculateDeliveryFee(request: CreateDeliveryRequest): Promise<FeeCalculation> {
  // 1. Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…Ø³Ø§ÙØ©
  const distance = await calculateDistance(
    request.pickup.lat, request.pickup.lng,
    request.delivery.lat, request.delivery.lng
  );

  // 2. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…Ù†Ø·Ù‚Ø© Ø§Ù„ØªØ³Ø¹ÙŠØ±
  const zone = await getDeliveryZone(request.delivery.governorate);

  // 3. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø±Ø³ÙˆÙ… Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
  let baseFee = zone.basePrice;
  let distanceFee = distance * zone.pricePerKm;

  // 4. Ø±Ø³ÙˆÙ… Ø¥Ø¶Ø§ÙÙŠØ©
  let additionalFees = 0;

  // Ù†ÙˆØ¹ Ø§Ù„Ø´Ø­Ù†Ø©
  const packageMultiplier = {
    document: 0.8,
    small_package: 1.0,
    medium_package: 1.3,
    large_package: 1.6,
    fragile: 1.5,
    food: 1.2
  };
  additionalFees += baseFee * (packageMultiplier[request.package.type] - 1);

  // Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹
  if (request.options.isExpress) {
    additionalFees += (baseFee + distanceFee) * (zone.expressMultiplier - 1);
  }

  // Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ©
  if (isPeakHour(zone)) {
    additionalFees += (baseFee + distanceFee) * (zone.peakHourMultiplier - 1);
  }

  // Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø²Ø§Ø¦Ø¯
  if (request.package.weight && request.package.weight > 5) {
    additionalFees += (request.package.weight - 5) * 5; // 5 Ø¬.Ù… Ù„ÙƒÙ„ ÙƒØ¬Ù… Ø²Ø§Ø¦Ø¯
  }

  // Ø§Ù„ØªØ£Ù…ÙŠÙ†
  let insuranceFee = 0;
  if (request.package.value) {
    insuranceFee = request.package.value * 0.01; // 1% Ù…Ù† Ø§Ù„Ù‚ÙŠÙ…Ø©
  }

  // Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
  const subtotal = baseFee + distanceFee + additionalFees + insuranceFee;
  const platformFee = subtotal * 0.15;  // 15% Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ù†ØµØ©
  const driverPayout = subtotal - platformFee;

  return {
    breakdown: {
      baseFee,
      distanceFee,
      additionalFees,
      insuranceFee,
      platformFee
    },
    subtotal,
    total: subtotal + (request.options.codAmount ? 0 : 0), // COD Ù„Ø§ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ Ø±Ø³ÙˆÙ… Ø§Ù„ØªÙˆØµÙŠÙ„
    driverPayout,
    estimatedDuration: calculateDuration(distance),
    distance
  };
}
```

---

#### FR-CD-004: Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø°ÙƒÙŠ (Smart Matching)
**Ø§Ù„ÙˆØµÙ:** Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© Ù„Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ø³Ø§Ø¦Ù‚ Ù„Ù„Ø·Ù„Ø¨

```typescript
interface MatchingCriteria {
  weights: {
    distance: number;        // 30%
    rating: number;          // 25%
    successRate: number;     // 20%
    vehicleMatch: number;    // 15%
    availability: number;    // 10%
  };
}

async function findBestDrivers(
  request: DeliveryRequest,
  limit: number = 5
): Promise<RankedDriver[]> {

  // 1. Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† Ø§Ù„Ù…ØªØ§Ø­ÙŠÙ† ÙÙŠ Ø§Ù„Ù†Ø·Ø§Ù‚
  const nearbyDrivers = await getNearbyAvailableDrivers(
    request.pickup.lat,
    request.pickup.lng,
    30 // km radius
  );

  // 2. ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
  const eligibleDrivers = nearbyDrivers.filter(driver =>
    isVehicleSuitable(driver.vehicleType, request.package.type)
  );

  // 3. Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ù„ÙƒÙ„ Ø³Ø§Ø¦Ù‚
  const scoredDrivers = eligibleDrivers.map(driver => {
    let score = 0;

    // Ø£. Ø§Ù„Ù…Ø³Ø§ÙØ© (0-30 Ù†Ù‚Ø·Ø©)
    const distanceToPickup = calculateDistance(
      driver.currentLat, driver.currentLng,
      request.pickup.lat, request.pickup.lng
    );
    score += Math.max(0, 30 - (distanceToPickup * 2));

    // Ø¨. Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (0-25 Ù†Ù‚Ø·Ø©)
    score += (driver.averageRating / 5) * 25;

    // Ø¬. Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­ (0-20 Ù†Ù‚Ø·Ø©)
    if (driver.totalDeliveries > 10) {
      const successRate = driver.successfulDeliveries / driver.totalDeliveries;
      score += successRate * 20;
    } else {
      score += 15; // Ù†Ù‚Ø§Ø· Ø§ÙØªØ±Ø§Ø¶ÙŠØ© Ù„Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯
    }

    // Ø¯. Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø© (0-15 Ù†Ù‚Ø·Ø©)
    score += getVehicleMatchScore(driver.vehicleType, request.package.type);

    // Ù‡Ù€. Ø§Ù„ØªÙˆÙØ± ÙˆØ§Ù„Ø§Ø³ØªØ¹Ø¯Ø§Ø¯ (0-10 Ù†Ù‚Ø§Ø·)
    const minutesSinceLastActivity = getMinutesSince(driver.lastLocationUpdate);
    if (minutesSinceLastActivity < 5) score += 10;
    else if (minutesSinceLastActivity < 15) score += 7;
    else if (minutesSinceLastActivity < 30) score += 4;

    // Ùˆ. Ù…Ù†Ø·Ù‚Ø© Ù…ÙØ¶Ù„Ø© (Bonus)
    if (driver.preferredAreas?.includes(request.delivery.governorate)) {
      score += 5;
    }

    return {
      driver,
      score,
      distanceToPickup,
      estimatedArrival: calculateETA(distanceToPickup)
    };
  });

  // 4. ØªØ±ØªÙŠØ¨ ÙˆØ¥Ø±Ø¬Ø§Ø¹ Ø§Ù„Ø£ÙØ¶Ù„
  return scoredDrivers
    .sort((a, b) => b.score - a.score)
    .slice(0, limit);
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ù†Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
function isVehicleSuitable(vehicleType: string, packageType: string): boolean {
  const suitability: Record<string, string[]> = {
    bicycle: ['document'],
    motorcycle: ['document', 'small_package', 'food'],
    car: ['document', 'small_package', 'medium_package', 'fragile', 'food'],
    van: ['document', 'small_package', 'medium_package', 'large_package', 'fragile'],
    truck: ['medium_package', 'large_package']
  };

  return suitability[vehicleType]?.includes(packageType) || false;
}
```

---

#### FR-CD-005: ØªØ¯ÙÙ‚ Ø§Ù„Ø·Ù„Ø¨ (Order Flow)
**Ø§Ù„ÙˆØµÙ:** Ù…Ø±Ø§Ø­Ù„ Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­ØªÙ‰ Ø§Ù„ØªØ³Ù„ÙŠÙ…

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                        ØªØ¯ÙÙ‚ Ø·Ù„Ø¨ Ø§Ù„ØªÙˆØµÙŠÙ„                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚ pending â”‚â”€â”€â”€â”€â–ºâ”‚ assignedâ”‚â”€â”€â”€â”€â–ºâ”‚ heading â”‚â”€â”€â”€â”€â–ºâ”‚ picked  â”‚â”€â”€â”€â”€â–ºâ”‚in_transitâ”‚
     â”‚         â”‚     â”‚         â”‚     â”‚ pickup  â”‚     â”‚   up    â”‚     â”‚         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚               â”‚               â”‚               â”‚               â”‚
          â”‚               â”‚               â”‚               â”‚               â”‚
          â–¼               â–¼               â–¼               â–¼               â–¼
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚cancelledâ”‚     â”‚cancelledâ”‚     â”‚cancelledâ”‚     â”‚cancelledâ”‚     â”‚ arrived â”‚
     â”‚         â”‚     â”‚         â”‚     â”‚         â”‚     â”‚         â”‚     â”‚         â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                           â”‚
                                                                           â”‚
                                                                           â–¼
                                                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                     â”‚deliveredâ”‚
                                                                     â”‚         â”‚
                                                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                                           â”‚
                                                                           â”‚
                                                                           â–¼
                                                                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                                                     â”‚completedâ”‚
                                                                     â”‚ (rated) â”‚
                                                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ØªÙØ§ØµÙŠÙ„ ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©:**

```typescript
interface DeliveryStatusFlow {
  pending: {
    description: 'ÙÙŠ Ø§Ù†ØªØ¸Ø§Ø± Ø³Ø§Ø¦Ù‚';
    timeout: 15 * 60 * 1000;  // 15 Ø¯Ù‚ÙŠÙ‚Ø©
    onTimeout: 'escalate' | 'cancel';
    allowedActions: ['cancel', 'edit'];
  };

  assigned: {
    description: 'ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø³Ø§Ø¦Ù‚';
    timeout: 10 * 60 * 1000;  // 10 Ø¯Ù‚Ø§Ø¦Ù‚
    onTimeout: 'reassign';
    allowedActions: ['cancel'];
    notifications: ['driver_assigned_customer', 'new_delivery_driver'];
  };

  heading_to_pickup: {
    description: 'Ø§Ù„Ø³Ø§Ø¦Ù‚ ÙÙŠ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…';
    trackingEnabled: true;
    allowedActions: ['cancel_with_fee'];
    notifications: ['driver_on_way_merchant'];
  };

  picked_up: {
    description: 'ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø©';
    requiresAction: 'confirm_pickup';
    requiresPhoto: true;
    allowedActions: [];
    notifications: ['package_picked_up_customer'];
  };

  in_transit: {
    description: 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„';
    trackingEnabled: true;
    allowedActions: ['report_issue'];
    notifications: [];
  };

  arrived: {
    description: 'Ø§Ù„Ø³Ø§Ø¦Ù‚ ÙˆØµÙ„';
    timeout: 15 * 60 * 1000;  // 15 Ø¯Ù‚ÙŠÙ‚Ø© Ù„Ù„ØªØ³Ù„ÙŠÙ…
    onTimeout: 'contact_support';
    allowedActions: ['confirm_delivery', 'report_issue'];
    notifications: ['driver_arrived_customer'];
  };

  delivered: {
    description: 'ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…';
    requiresAction: 'delivery_confirmation';
    requiresPhoto: true;
    requiresSignature: (request) => request.package.requiresSignature;
    codCollection: (request) => request.options.codAmount > 0;
    notifications: ['delivery_completed_all'];
  };

  completed: {
    description: 'Ù…ÙƒØªÙ…Ù„ ÙˆÙ…Ù‚ÙŠÙ‘Ù…';
    allowsRating: true;
    payoutProcessed: true;
  };

  cancelled: {
    description: 'Ù…Ù„ØºÙŠ';
    cancelledBy: 'customer' | 'driver' | 'system' | 'merchant';
    refundPolicy: (status, cancelledBy) => calculateRefund(status, cancelledBy);
  };

  failed: {
    description: 'ÙØ´Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„';
    reasons: ['customer_unavailable', 'wrong_address', 'refused', 'other'];
    requiresProof: true;
    nextAction: 'return' | 'reschedule' | 'refund';
  };
}
```

---

#### FR-CD-006: Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø¨Ø§Ø´Ø± (Live Tracking)
**Ø§Ù„ÙˆØµÙ:** Ù†Ø¸Ø§Ù… ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ

**Ù„Ù„Ø¹Ù…ÙŠÙ„:**
```typescript
interface CustomerTrackingView {
  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨
  requestCode: string;
  status: DeliveryStatus;
  statusAr: string;

  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø³Ø§Ø¦Ù‚ (Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹ÙŠÙŠÙ†)
  driver?: {
    name: string;
    photo: string;
    phone: string;       // Ù…Ø®ÙÙŠ Ø¬Ø²Ø¦ÙŠØ§Ù‹: 010****5678
    vehicleType: string;
    vehiclePlate: string;
    rating: number;
  };

  // Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø­Ø§Ù„ÙŠ
  currentLocation?: {
    lat: number;
    lng: number;
    heading: number;
    lastUpdate: Date;
  };

  // Ø§Ù„ØªÙˆÙ‚Ø¹Ø§Øª
  estimates: {
    arrivalTime: Date;
    remainingDistance: number;
    remainingDuration: number;
  };

  // Ø§Ù„Ù…Ø³Ø§Ø±
  route?: {
    polyline: string;    // Encoded polyline
    waypoints: Array<{lat: number; lng: number}>;
  };

  // Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
  timeline: Array<{
    status: string;
    statusAr: string;
    timestamp: Date;
    location?: {lat: number; lng: number};
    note?: string;
  }>;
}
```

**ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„ÙØ¹Ù„ÙŠ:**
```typescript
// WebSocket for real-time updates
class DeliveryTrackingSocket {
  private socket: WebSocket;

  connect(requestCode: string): void {
    this.socket = new WebSocket(`wss://api.haderos.com/tracking/${requestCode}`);

    this.socket.onmessage = (event) => {
      const update = JSON.parse(event.data);

      switch (update.type) {
        case 'location':
          this.onLocationUpdate(update.data);
          break;
        case 'status':
          this.onStatusChange(update.data);
          break;
        case 'eta':
          this.onETAUpdate(update.data);
          break;
      }
    };
  }

  private onLocationUpdate(data: LocationUpdate): void {
    // Update map marker
    // Update polyline
    // Recalculate ETA
  }
}
```

---

#### FR-CD-007: Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹ Ù„Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†
**Ø§Ù„ÙˆØµÙ:** Ø¥Ø¯Ø§Ø±Ø© Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚ ÙˆØ§Ù„Ù…Ø¯ÙÙˆØ¹Ø§Øª

```typescript
interface DriverWallet {
  driverId: number;
  balance: number;          // Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ
  pendingBalance: number;   // Ø£Ø±Ø¨Ø§Ø­ Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©
  totalEarnings: number;    // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­
  totalPayouts: number;     // Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø­ÙˆØ¨Ø§Øª
}

// Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
enum TransactionType {
  DELIVERY_EARNING = 'delivery_earning',  // Ø£Ø¬Ø± ØªÙˆØµÙŠÙ„
  TIP = 'tip',                            // Ø¨Ù‚Ø´ÙŠØ´
  BONUS = 'bonus',                        // Ù…ÙƒØ§ÙØ£Ø©
  PAYOUT = 'payout',                      // Ø³Ø­Ø¨
  PENALTY = 'penalty',                    // ØºØ±Ø§Ù…Ø©
  ADJUSTMENT = 'adjustment',              // ØªØ¹Ø¯ÙŠÙ„
  COD_COLLECTED = 'cod_collected',        // COD Ù…Ø­ØµÙ„
  COD_REMITTED = 'cod_remitted'           // COD Ù…Ø³Ù„Ù… Ù„Ù„ØªØ§Ø¬Ø±
}

// Ø­Ø³Ø§Ø¨ Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„ØªÙˆØµÙŠÙ„
function calculateDriverEarning(delivery: CompletedDelivery): DriverEarning {
  const basePayout = delivery.fee.driverPayout;

  // Ø§Ù„Ø¨Ù‚Ø´ÙŠØ´
  const tip = delivery.options.tip || 0;

  // Ø§Ù„Ù…ÙƒØ§ÙØ¢Øª
  let bonus = 0;

  // Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹
  if (delivery.actualDuration < delivery.estimatedDuration * 0.8) {
    bonus += 10; // 10 Ø¬.Ù… Ù„Ù„ØªÙˆØµÙŠÙ„ Ø£Ø³Ø±Ø¹ Ù…Ù† Ø§Ù„Ù…ØªÙˆÙ‚Ø¹
  }

  // Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù…ØªØ§Ø²
  if (delivery.customerRating === 5) {
    bonus += 5;
  }

  // Ù…ÙƒØ§ÙØ£Ø© Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ©
  if (isPeakHour(delivery.deliveredAt)) {
    bonus += basePayout * 0.1; // 10% Ø¥Ø¶Ø§ÙÙŠ
  }

  // Ø§Ù„Ø®ØµÙˆÙ…Ø§Øª
  let deductions = 0;

  // Ø®ØµÙ… Ø§Ù„ØªØ£Ø®ÙŠØ±
  if (delivery.actualDuration > delivery.estimatedDuration * 1.5) {
    deductions += 5;
  }

  return {
    basePayout,
    tip,
    bonus,
    deductions,
    total: basePayout + tip + bonus - deductions,
    breakdown: {
      deliveryFee: basePayout,
      expressBonus: bonus > 0 ? 10 : 0,
      ratingBonus: delivery.customerRating === 5 ? 5 : 0,
      peakBonus: isPeakHour(delivery.deliveredAt) ? basePayout * 0.1 : 0,
      tip,
      lateDeduction: delivery.actualDuration > delivery.estimatedDuration * 1.5 ? -5 : 0
    }
  };
}
```

**Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø­Ø¨:**
```typescript
interface PayoutRequest {
  driverId: number;
  amount: number;
  method: 'bank_transfer' | 'vodafone_cash' | 'etisalat_cash' | 'orange_money' | 'instapay';
  accountDetails: {
    bankName?: string;
    accountNumber?: string;
    accountHolder?: string;
    phoneNumber?: string;  // Ù„Ù„Ù…Ø­Ø§ÙØ¸
  };
}

// Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø³Ø­Ø¨
const payoutRules = {
  minAmount: 100,            // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ø¯Ù†Ù‰ 100 Ø¬.Ù…
  maxAmountPerDay: 10000,    // Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 10,000 Ø¬.Ù… ÙŠÙˆÙ…ÙŠØ§Ù‹
  processingTime: {
    vodafone_cash: 'instant',
    etisalat_cash: 'instant',
    orange_money: 'instant',
    instapay: 'instant',
    bank_transfer: '1-2 business days'
  },
  fees: {
    vodafone_cash: 0,
    etisalat_cash: 0,
    orange_money: 0,
    instapay: 0,
    bank_transfer: amount => amount > 5000 ? 0 : 10
  }
};
```

---

#### FR-CD-008: Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
**Ø§Ù„ÙˆØµÙ:** ØªÙ‚ÙŠÙŠÙ… Ø«Ù†Ø§Ø¦ÙŠ Ø§Ù„Ø§ØªØ¬Ø§Ù‡ Ø¨ÙŠÙ† Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙˆØ§Ù„Ø³Ø§Ø¦Ù‚

```typescript
interface DeliveryRating {
  requestId: number;

  // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø³Ø§Ø¦Ù‚
  customerToDriver: {
    rating: 1 | 2 | 3 | 4 | 5;
    tags?: Array<
      | 'fast_delivery'        // ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹
      | 'professional'         // Ù…Ø­ØªØ±Ù
      | 'polite'               // Ù…Ù‡Ø°Ø¨
      | 'careful_handling'     // Ø­Ø±ÙŠØµ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø­Ù†Ø©
      | 'good_communication'   // ØªÙˆØ§ØµÙ„ Ø¬ÙŠØ¯
      | 'late'                 // Ù…ØªØ£Ø®Ø±
      | 'rude'                 // ØºÙŠØ± Ù…Ù‡Ø°Ø¨
      | 'damaged_package'      // Ø§Ù„Ø´Ø­Ù†Ø© ØªØ¶Ø±Ø±Øª
      | 'wrong_delivery'       // ØªÙˆØµÙŠÙ„ Ø®Ø§Ø·Ø¦
    >;
    comment?: string;
    tip?: number;
  };

  // ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù„Ù„Ø¹Ù…ÙŠÙ„
  driverToCustomer?: {
    rating: 1 | 2 | 3 | 4 | 5;
    tags?: Array<
      | 'easy_location'        // Ù…ÙˆÙ‚Ø¹ Ø³Ù‡Ù„
      | 'responsive'           // Ù…ØªØ¬Ø§ÙˆØ¨
      | 'prepared'             // Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªÙ„Ø§Ù…
      | 'hard_to_find'         // ØµØ¹Ø¨ Ø§Ù„ÙˆØµÙˆÙ„
      | 'unresponsive'         // Ù„Ø§ ÙŠØ±Ø¯
      | 'delayed_pickup'       // ØªØ£Ø®Ø± ÙÙŠ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
    >;
    comment?: string;
  };
}

// ØªØ£Ø«ÙŠØ± Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø§Ø¦Ù‚
function updateDriverRating(driverId: number, newRating: number): void {
  const driver = await getDriver(driverId);

  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØªÙˆØ³Ø· Ø§Ù„Ù…Ø±Ø¬Ø­ (Ø¢Ø®Ø± 100 ØªÙ‚ÙŠÙŠÙ…)
  const recentRatings = await getRecentRatings(driverId, 100);
  const newAverage = calculateWeightedAverage(recentRatings);

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
  await updateDriver(driverId, { averageRating: newAverage });

  // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥ÙŠÙ‚Ø§Ù
  if (newAverage < 3.5 && driver.totalRatings > 20) {
    await flagDriverForReview(driverId, 'low_rating');
  }

  // Ù…ÙƒØ§ÙØ£Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù…ØªØ§Ø²
  if (newAverage >= 4.8 && driver.totalRatings > 50) {
    await awardBadge(driverId, 'top_rated');
  }
}
```

---

### 2.3 ÙˆØ§Ø¬Ù‡Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…

#### UI-CD-001: ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø³Ø§Ø¦Ù‚ (Driver App)

**Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â˜°                    HADEROS Driver                    [ğŸ‘¤]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚     ğŸ’° Ø§Ù„ÙŠÙˆÙ…: 450 Ø¬.Ù…     â”‚     ğŸ“¦ 8 ØªÙˆØµÙŠÙ„Ø§Øª           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®             â”‚   â”‚
â”‚  â”‚           â”‚                              â”‚             â”‚   â”‚
â”‚  â”‚           â”‚       [    Ø£Ù†Øª Ù…ØªØ§Ø­    ]     â”‚             â”‚   â”‚
â”‚  â”‚           â”‚           â— ONLINE           â”‚             â”‚   â”‚
â”‚  â”‚           â”‚                              â”‚             â”‚   â”‚
â”‚  â”‚           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯             â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  âš¡ Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯ Ù‚Ø±ÙŠØ¨ Ù…Ù†Ùƒ!                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ“ Ø§Ù„Ù…Ø¹Ø§Ø¯ÙŠ â† ğŸ“ Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±                              â”‚   â”‚
â”‚  â”‚  ğŸ“ 12 ÙƒÙ…  â€¢  â±ï¸ ~25 Ø¯Ù‚ÙŠÙ‚Ø©  â€¢  ğŸ’° 65 Ø¬.Ù…                â”‚   â”‚
â”‚  â”‚  ğŸ“¦ Ø·Ø±Ø¯ ØµØºÙŠØ±                                            â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚   â”‚
â”‚  â”‚  â”‚   âœ“ Ù‚Ø¨ÙˆÙ„     â”‚    â”‚    âœ— Ø±ÙØ¶     â”‚                â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â° Ù…ØªØ¨Ù‚ÙŠ 00:45 Ù„Ù„Ø±Ø¯                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§ØªÙƒ                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â­ 4.8    â”‚    âœ… 98%    â”‚    ğŸ“¦ 156 Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±         â”‚   â”‚
â”‚  â”‚  ØªÙ‚ÙŠÙŠÙ…Ùƒ   â”‚  Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­ â”‚   ØªÙˆØµÙŠÙ„Ø§ØªÙƒ                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   [ğŸ ]        [ğŸ“¦]        [ğŸ’°]        [ğŸ“Š]        [âš™ï¸]         â”‚
â”‚   Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©    Ø§Ù„Ø·Ù„Ø¨Ø§Øª     Ø§Ù„Ù…Ø­ÙØ¸Ø©     Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª   Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ø´Ø§Ø´Ø© Ø§Ù„ØªÙˆØµÙŠÙ„ Ø§Ù„Ù†Ø´Ø·:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Ø±Ø¬ÙˆØ¹           ØªÙˆØµÙŠÙ„ Ù†Ø´Ø· #CD-2026-12345                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                      [Ø®Ø±ÙŠØ·Ø© GPS]                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚           ğŸ“ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ                        â”‚   â”‚
â”‚  â”‚           Ø£Ù†Øª                  Ø§Ù„Ø¹Ù…ÙŠÙ„                   â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ø§Ù„Ø­Ø§Ù„Ø©: Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„ ğŸš—                                â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  â—‹ ØªÙ… Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù… âœ“                                        â”‚   â”‚
â”‚  â”‚  â— Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„ â†                                       â”‚   â”‚
â”‚  â”‚  â—‹ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¥Ù„Ù‰:                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯                                              â”‚   â”‚
â”‚  â”‚  15 Ø´Ø§Ø±Ø¹ Ø§Ù„Ù…Ù„Ùƒ ÙÙŠØµÙ„ØŒ Ù…Ø¯ÙŠÙ†Ø© Ù†ØµØ±                          â”‚   â”‚
â”‚  â”‚  Ø§Ù„Ø¯ÙˆØ± 5ØŒ Ø´Ù‚Ø© 12                                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ğŸ“ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø¹Ù…ÙŠÙ„    â”‚    ğŸ—ºï¸ ÙØªØ­ Ø§Ù„Ø®Ø±ÙŠØ·Ø©             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“¦ Ø§Ù„Ø´Ø­Ù†Ø©:                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ø·Ø±Ø¯ ØµØºÙŠØ± - Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª                                  â”‚   â”‚
â”‚  â”‚  ğŸ’° ØªØ­ØµÙŠÙ„ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: 1,500 Ø¬.Ù…                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           [      âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…      ]                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚   âš ï¸ Ù…Ø´ÙƒÙ„Ø©       â”‚    â”‚   âŒ ÙØ´Ù„ Ø§Ù„ØªÙˆØµÙŠÙ„  â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Ø´Ø§Ø´Ø© ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Ø±Ø¬ÙˆØ¹              ØªØ£ÙƒÙŠØ¯ Ø§Ù„ØªØ³Ù„ÙŠÙ…                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“¸ ØµÙˆØ±Ø© Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ³Ù„ÙŠÙ… *                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                    [Ø§Ù„ØªÙ‚Ø· ØµÙˆØ±Ø©]                         â”‚   â”‚
â”‚  â”‚                         ğŸ“·                              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚            ØµÙˆØ±Ø© Ø§Ù„Ø·Ø±Ø¯ Ù…Ø¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø£Ùˆ Ø§Ù„Ø¨Ø§Ø¨               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  âœï¸ ØªÙˆÙ‚ÙŠØ¹ Ø§Ù„Ø¹Ù…ÙŠÙ„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                    [Ø§Ù„ØªÙ‚Ø· Ø§Ù„ØªÙˆÙ‚ÙŠØ¹]                      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’° ØªØ­ØµÙŠÙ„ COD                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: 1,500 Ø¬.Ù…                              â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â˜‘ï¸ ØªÙ… ØªØ­ØµÙŠÙ„ Ø§Ù„Ù…Ø¨Ù„Øº ÙƒØ§Ù…Ù„Ø§Ù‹                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ… Ù„Ù„Ø²ÙˆØ¬Ø©                                      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           [      âœ… ØªØ£ÙƒÙŠØ¯ ÙˆØ¥Ù†Ù‡Ø§Ø¡      ]                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### UI-CD-002: Ø´Ø§Ø´Ø© Ø§Ù„ØªØªØ¨Ø¹ Ù„Ù„Ø¹Ù…ÙŠÙ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† Ø±Ø¬ÙˆØ¹          ØªØªØ¨Ø¹ Ø§Ù„Ø´Ø­Ù†Ø© #CD-2026-12345                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                    [Ø®Ø±ÙŠØ·Ø© ØªÙØ§Ø¹Ù„ÙŠØ©]                      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚        ğŸª â”€â”€â”€â”€â”€â”€â”€â”€ ğŸš— â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º ğŸ                  â”‚   â”‚
â”‚  â”‚      Ø§Ù„Ù…ØªØ¬Ø±      Ø§Ù„Ø³Ø§Ø¦Ù‚              Ø£Ù†Øª               â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚                    ğŸ“ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù‡Ù†Ø§                        â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â±ï¸ Ø§Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹                                      â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚            15-20 Ø¯Ù‚ÙŠÙ‚Ø©                                  â”‚   â”‚
â”‚  â”‚            (2.5 ÙƒÙ… Ù…ØªØ¨Ù‚ÙŠ)                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ‘¤ Ø§Ù„Ø³Ø§Ø¦Ù‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  [ØµÙˆØ±Ø©]  Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯                                      â”‚   â”‚
â”‚  â”‚          â­ 4.9 (523 Ø±Ø­Ù„Ø©)                               â”‚   â”‚
â”‚  â”‚          ğŸï¸ Ù…ÙˆØªÙˆØ³ÙŠÙƒÙ„ - Ø£Ø¨ÙŠØ¶                             â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   â”‚
â”‚  â”‚  â”‚  ğŸ“ Ø§ØªØµØ§Ù„   â”‚    â”‚  ğŸ’¬ Ø±Ø³Ø§Ù„Ø©   â”‚                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ“ Ø±Ø­Ù„Ø© Ø§Ù„Ø´Ø­Ù†Ø©                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  âœ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø·Ù„Ø¨          10:30 Øµ                     â”‚   â”‚
â”‚  â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  âœ“ ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø³Ø§Ø¦Ù‚           10:32 Øµ                     â”‚   â”‚
â”‚  â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  âœ“ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø©         10:45 Øµ                     â”‚   â”‚
â”‚  â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â— Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆØµÙŠÙ„            11:00 Øµ â† Ø§Ù„Ø¢Ù†              â”‚   â”‚
â”‚  â”‚  â”‚                                                      â”‚   â”‚
â”‚  â”‚  â—‹ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…              ~11:20 Øµ                    â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  ğŸ’° Ù„Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…: 1,500 Ø¬.Ù…                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Database Schema)

```sql
-- =====================================================
-- Crowdsourced Delivery System Database Schema
-- =====================================================

-- 1. Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†
CREATE TABLE crowd_drivers (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT UNIQUE NOT NULL,

    -- Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©
    full_name VARCHAR(100) NOT NULL,
    full_name_ar VARCHAR(100),
    phone VARCHAR(20) NOT NULL,
    email VARCHAR(255),
    date_of_birth DATE,
    gender ENUM('male', 'female') DEFAULT 'male',
    profile_photo VARCHAR(500),

    -- Ø§Ù„Ù‡ÙˆÙŠØ©
    national_id VARCHAR(20) NOT NULL UNIQUE,
    national_id_front_image VARCHAR(500),
    national_id_back_image VARCHAR(500),
    national_id_verified BOOLEAN DEFAULT FALSE,
    selfie_image VARCHAR(500),
    selfie_verified BOOLEAN DEFAULT FALSE,

    -- KYC
    kyc_level ENUM('none', 'level1', 'level2', 'level3') DEFAULT 'none',
    kyc_verified_at DATETIME,
    kyc_verified_by INT,
    kyc_rejection_reason TEXT,

    -- Ø§Ù„Ù…Ø±ÙƒØ¨Ø©
    vehicle_type ENUM('bicycle', 'motorcycle', 'car', 'van', 'truck') NOT NULL,
    vehicle_brand VARCHAR(50),
    vehicle_model VARCHAR(50),
    vehicle_year INT,
    vehicle_color VARCHAR(30),
    vehicle_plate VARCHAR(20),
    vehicle_photo VARCHAR(500),
    driving_license_number VARCHAR(50),
    driving_license_image VARCHAR(500),
    driving_license_expiry DATE,

    -- Ø§Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ØªÙˆÙØ±
    current_lat DECIMAL(10, 8),
    current_lng DECIMAL(11, 8),
    current_heading INT,
    current_speed DECIMAL(5, 2),
    last_location_update DATETIME,
    is_online BOOLEAN DEFAULT FALSE,
    is_available BOOLEAN DEFAULT TRUE,
    current_delivery_id INT,

    -- Ø§Ù„ØªÙØ¶ÙŠÙ„Ø§Øª
    preferred_areas JSON,
    preferred_package_types JSON,
    max_delivery_distance_km INT DEFAULT 20,
    work_hours JSON,

    -- Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
    total_deliveries INT DEFAULT 0,
    successful_deliveries INT DEFAULT 0,
    cancelled_deliveries INT DEFAULT 0,
    failed_deliveries INT DEFAULT 0,
    average_rating DECIMAL(3, 2) DEFAULT 5.00,
    total_ratings INT DEFAULT 0,
    total_distance_km DECIMAL(10, 2) DEFAULT 0,

    -- Ø§Ù„Ù…Ø§Ù„ÙŠØ©
    wallet_balance DECIMAL(10, 2) DEFAULT 0,
    pending_balance DECIMAL(10, 2) DEFAULT 0,
    total_earnings DECIMAL(12, 2) DEFAULT 0,
    total_payouts DECIMAL(12, 2) DEFAULT 0,
    pending_cod DECIMAL(10, 2) DEFAULT 0,

    -- Ø§Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„Ø¨Ù†ÙƒÙŠ
    payout_method ENUM('bank_transfer', 'vodafone_cash', 'etisalat_cash', 'orange_money', 'instapay'),
    bank_name VARCHAR(100),
    bank_account_number VARCHAR(50),
    bank_account_holder VARCHAR(100),
    mobile_wallet_number VARCHAR(20),

    -- Ø§Ù„Ø­Ø§Ù„Ø©
    status ENUM('pending_verification', 'active', 'suspended', 'banned', 'inactive') DEFAULT 'pending_verification',
    status_reason TEXT,
    suspended_until DATETIME,

    -- Ø§Ù„Ø´Ø§Ø±Ø§Øª ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰
    driver_level ENUM('beginner', 'regular', 'experienced', 'expert', 'master') DEFAULT 'beginner',
    badges JSON,

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (user_id) REFERENCES users(id),
    INDEX idx_status (status),
    INDEX idx_location (current_lat, current_lng),
    INDEX idx_available (is_online, is_available),
    INDEX idx_vehicle (vehicle_type)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 2. Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙˆØµÙŠÙ„
CREATE TABLE crowd_delivery_requests (
    id INT AUTO_INCREMENT PRIMARY KEY,
    request_code VARCHAR(20) UNIQUE NOT NULL,

    -- Ø§Ù„Ù…ØµØ¯Ø±
    source ENUM('order', 'merchant', 'individual') NOT NULL,
    source_order_id INT,
    merchant_id INT,
    customer_id INT,

    -- Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…
    pickup_address TEXT NOT NULL,
    pickup_address_ar TEXT,
    pickup_lat DECIMAL(10, 8) NOT NULL,
    pickup_lng DECIMAL(11, 8) NOT NULL,
    pickup_contact_name VARCHAR(100) NOT NULL,
    pickup_contact_phone VARCHAR(20) NOT NULL,
    pickup_notes TEXT,
    pickup_time_from DATETIME,
    pickup_time_to DATETIME,

    -- Ø§Ù„ØªØ³Ù„ÙŠÙ…
    delivery_address TEXT NOT NULL,
    delivery_address_ar TEXT,
    delivery_lat DECIMAL(10, 8) NOT NULL,
    delivery_lng DECIMAL(11, 8) NOT NULL,
    delivery_governorate VARCHAR(50) NOT NULL,
    delivery_city VARCHAR(100) NOT NULL,
    delivery_contact_name VARCHAR(100) NOT NULL,
    delivery_contact_phone VARCHAR(20) NOT NULL,
    delivery_notes TEXT,
    delivery_time_from DATETIME,
    delivery_time_to DATETIME,

    -- Ø§Ù„Ø´Ø­Ù†Ø©
    package_type ENUM('document', 'small_package', 'medium_package', 'large_package', 'fragile', 'food') NOT NULL,
    package_weight_kg DECIMAL(5, 2),
    package_length_cm INT,
    package_width_cm INT,
    package_height_cm INT,
    package_description TEXT,
    package_value DECIMAL(10, 2),
    requires_signature BOOLEAN DEFAULT FALSE,
    is_fragile BOOLEAN DEFAULT FALSE,
    temperature_controlled BOOLEAN DEFAULT FALSE,

    -- Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    is_express BOOLEAN DEFAULT FALSE,
    is_scheduled BOOLEAN DEFAULT FALSE,
    scheduled_date DATE,
    scheduled_time_slot VARCHAR(20),

    -- Ø§Ù„ØªÙƒÙ„ÙØ©
    distance_km DECIMAL(6, 2) NOT NULL,
    estimated_duration_minutes INT NOT NULL,
    base_fee DECIMAL(10, 2) NOT NULL,
    distance_fee DECIMAL(10, 2) NOT NULL,
    additional_fees DECIMAL(10, 2) DEFAULT 0,
    express_fee DECIMAL(10, 2) DEFAULT 0,
    insurance_fee DECIMAL(10, 2) DEFAULT 0,
    total_fee DECIMAL(10, 2) NOT NULL,
    platform_fee DECIMAL(10, 2) NOT NULL,
    driver_payout DECIMAL(10, 2) NOT NULL,

    -- COD
    cod_amount DECIMAL(10, 2) DEFAULT 0,
    cod_collected BOOLEAN DEFAULT FALSE,
    cod_collected_at DATETIME,
    cod_remitted BOOLEAN DEFAULT FALSE,
    cod_remitted_at DATETIME,

    -- Ø§Ù„Ø­Ø§Ù„Ø©
    status ENUM(
        'pending',
        'finding_driver',
        'driver_assigned',
        'driver_heading_pickup',
        'arrived_pickup',
        'picked_up',
        'in_transit',
        'arrived_delivery',
        'delivered',
        'completed',
        'cancelled',
        'failed'
    ) DEFAULT 'pending',

    -- Ø§Ù„Ø³Ø§Ø¦Ù‚
    assigned_driver_id INT,
    driver_assigned_at DATETIME,
    assignment_attempts INT DEFAULT 0,

    -- Ø§Ù„ØªØªØ¨Ø¹
    current_lat DECIMAL(10, 8),
    current_lng DECIMAL(11, 8),
    last_tracking_update DATETIME,

    -- Ø§Ù„ØªÙˆÙ‚ÙŠØªØ§Øª Ø§Ù„ÙØ¹Ù„ÙŠØ©
    driver_accepted_at DATETIME,
    arrived_pickup_at DATETIME,
    picked_up_at DATETIME,
    in_transit_at DATETIME,
    arrived_delivery_at DATETIME,
    delivered_at DATETIME,
    completed_at DATETIME,
    cancelled_at DATETIME,

    -- Ø§Ù„Ø¥Ù„ØºØ§Ø¡/Ø§Ù„ÙØ´Ù„
    cancelled_by ENUM('customer', 'driver', 'merchant', 'system'),
    cancellation_reason TEXT,
    failure_reason TEXT,
    failure_proof_image VARCHAR(500),

    -- Ø¥Ø«Ø¨Ø§Øª Ø§Ù„ØªØ³Ù„ÙŠÙ…
    delivery_proof_image VARCHAR(500),
    recipient_signature VARCHAR(500),
    recipient_name VARCHAR(100),
    delivery_notes_driver TEXT,

    -- Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
    customer_rating INT,
    customer_review TEXT,
    driver_rating INT,
    driver_review TEXT,

    -- Ø§Ù„Ø¨Ù‚Ø´ÙŠØ´
    tip_amount DECIMAL(10, 2) DEFAULT 0,
    tip_paid_at DATETIME,

    -- Ø§Ù„Ø¯ÙØ¹
    payment_status ENUM('pending', 'paid', 'refunded', 'failed') DEFAULT 'pending',
    payment_method VARCHAR(50),
    payment_reference VARCHAR(100),
    paid_at DATETIME,

    created_by INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    FOREIGN KEY (assigned_driver_id) REFERENCES crowd_drivers(id),
    FOREIGN KEY (source_order_id) REFERENCES orders(id),
    INDEX idx_status (status),
    INDEX idx_driver (assigned_driver_id),
    INDEX idx_request_code (request_code),
    INDEX idx_created (created_at),
    INDEX idx_pickup_location (pickup_lat, pickup_lng),
    INDEX idx_delivery_location (delivery_lat, delivery_lng)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 3. Ø³Ø¬Ù„ ØªØªØ¨Ø¹ Ø§Ù„Ù…ÙˆÙ‚Ø¹
CREATE TABLE crowd_delivery_tracking (
    id BIGINT AUTO_INCREMENT PRIMARY KEY,
    request_id INT NOT NULL,
    driver_id INT NOT NULL,

    lat DECIMAL(10, 8) NOT NULL,
    lng DECIMAL(11, 8) NOT NULL,
    accuracy_meters INT,
    speed_kmh DECIMAL(5, 2),
    heading INT,
    altitude_meters INT,
    battery_level INT,

    recorded_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (request_id) REFERENCES crowd_delivery_requests(id),
    FOREIGN KEY (driver_id) REFERENCES crowd_drivers(id),
    INDEX idx_request_time (request_id, recorded_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 4. Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ù…Ø­ÙØ¸Ø© Ø§Ù„Ø³Ø§Ø¦Ù‚
CREATE TABLE crowd_driver_wallet_transactions (
    id INT AUTO_INCREMENT PRIMARY KEY,
    driver_id INT NOT NULL,

    transaction_type ENUM(
        'delivery_earning',
        'tip',
        'bonus',
        'penalty',
        'adjustment',
        'payout',
        'cod_collected',
        'cod_remitted'
    ) NOT NULL,

    amount DECIMAL(10, 2) NOT NULL,
    balance_before DECIMAL(10, 2) NOT NULL,
    balance_after DECIMAL(10, 2) NOT NULL,

    related_request_id INT,
    description TEXT,
    description_ar TEXT,

    -- Ù„Ù„Ø³Ø­Ø¨
    payout_method ENUM('bank_transfer', 'vodafone_cash', 'etisalat_cash', 'orange_money', 'instapay'),
    payout_account VARCHAR(100),
    payout_reference VARCHAR(100),
    payout_status ENUM('pending', 'processing', 'completed', 'failed'),
    payout_completed_at DATETIME,
    payout_failure_reason TEXT,

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (driver_id) REFERENCES crowd_drivers(id),
    FOREIGN KEY (related_request_id) REFERENCES crowd_delivery_requests(id),
    INDEX idx_driver (driver_id),
    INDEX idx_type (transaction_type),
    INDEX idx_created (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 5. Ù…Ù†Ø§Ø·Ù‚ Ø§Ù„ØªØ³Ø¹ÙŠØ±
CREATE TABLE crowd_delivery_zones (
    id INT AUTO_INCREMENT PRIMARY KEY,
    zone_code VARCHAR(20) UNIQUE NOT NULL,
    zone_name VARCHAR(100) NOT NULL,
    zone_name_ar VARCHAR(100),
    governorate VARCHAR(50) NOT NULL,
    cities JSON,

    -- Ø§Ù„ØªØ³Ø¹ÙŠØ±
    base_price DECIMAL(10, 2) NOT NULL,
    price_per_km DECIMAL(5, 2) NOT NULL,
    min_price DECIMAL(10, 2) NOT NULL,
    max_price DECIMAL(10, 2),

    -- Ø§Ù„Ù…Ø¶Ø§Ø¹ÙØ§Øª
    express_multiplier DECIMAL(3, 2) DEFAULT 1.5,
    peak_hour_multiplier DECIMAL(3, 2) DEFAULT 1.3,
    night_multiplier DECIMAL(3, 2) DEFAULT 1.2,
    weekend_multiplier DECIMAL(3, 2) DEFAULT 1.1,
    rain_multiplier DECIMAL(3, 2) DEFAULT 1.4,

    -- Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ©
    peak_hours JSON,
    night_hours JSON,

    -- Ø§Ù„Ø­Ø§Ù„Ø©
    is_active BOOLEAN DEFAULT TRUE,
    coverage_polygon JSON,

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,

    INDEX idx_governorate (governorate),
    INDEX idx_active (is_active)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 6. Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
CREATE TABLE crowd_delivery_ratings (
    id INT AUTO_INCREMENT PRIMARY KEY,
    request_id INT UNIQUE NOT NULL,

    -- ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù„Ù„Ø³Ø§Ø¦Ù‚
    customer_to_driver_rating INT CHECK (customer_to_driver_rating BETWEEN 1 AND 5),
    customer_to_driver_tags JSON,
    customer_to_driver_comment TEXT,
    customer_rated_at DATETIME,

    -- ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù„Ù„Ø¹Ù…ÙŠÙ„
    driver_to_customer_rating INT CHECK (driver_to_customer_rating BETWEEN 1 AND 5),
    driver_to_customer_tags JSON,
    driver_to_customer_comment TEXT,
    driver_rated_at DATETIME,

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    FOREIGN KEY (request_id) REFERENCES crowd_delivery_requests(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- 7. Ø­ÙˆØ§ÙØ² ÙˆÙ…ÙƒØ§ÙØ¢Øª Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†
CREATE TABLE crowd_driver_incentives (
    id INT AUTO_INCREMENT PRIMARY KEY,

    incentive_code VARCHAR(20) UNIQUE NOT NULL,
    title VARCHAR(100) NOT NULL,
    title_ar VARCHAR(100),
    description TEXT,
    description_ar TEXT,

    incentive_type ENUM('per_delivery', 'milestone', 'streak', 'peak_hour', 'area_bonus', 'referral') NOT NULL,

    -- Ø§Ù„Ø´Ø±ÙˆØ·
    conditions JSON,
    /*
    Examples:
    {"min_deliveries": 10, "period": "day"}
    {"area": "new_cairo", "hours": "12:00-14:00"}
    {"streak_days": 7}
    */

    -- Ø§Ù„Ù…ÙƒØ§ÙØ£Ø©
    reward_type ENUM('fixed', 'percentage', 'multiplier') NOT NULL,
    reward_value DECIMAL(10, 2) NOT NULL,

    -- Ø§Ù„ÙØªØ±Ø©
    start_date DATE NOT NULL,
    end_date DATE,

    -- Ø§Ù„Ø­Ø¯ÙˆØ¯
    max_uses_per_driver INT,
    max_total_uses INT,
    current_uses INT DEFAULT 0,

    is_active BOOLEAN DEFAULT TRUE,

    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

---

## 4. ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (API Specification)

### 4.1 Driver Endpoints

```typescript
// Driver Registration & Profile
POST   /api/drivers/register
GET    /api/drivers/me
PUT    /api/drivers/me
POST   /api/drivers/me/documents
GET    /api/drivers/me/kyc-status

// Availability & Location
POST   /api/drivers/go-online
POST   /api/drivers/go-offline
POST   /api/drivers/location
GET    /api/drivers/me/status

// Deliveries
GET    /api/drivers/nearby-requests
POST   /api/drivers/requests/:id/accept
POST   /api/drivers/requests/:id/reject
GET    /api/drivers/active-delivery
POST   /api/drivers/deliveries/:id/status
POST   /api/drivers/deliveries/:id/pickup-confirm
POST   /api/drivers/deliveries/:id/delivery-confirm
POST   /api/drivers/deliveries/:id/report-issue

// Wallet
GET    /api/drivers/wallet
GET    /api/drivers/wallet/transactions
POST   /api/drivers/wallet/payout
GET    /api/drivers/earnings/summary

// Ratings & Stats
GET    /api/drivers/me/ratings
GET    /api/drivers/me/stats
```

### 4.2 Customer/Merchant Endpoints

```typescript
// Delivery Requests
POST   /api/deliveries/calculate-fee
POST   /api/deliveries/create
GET    /api/deliveries/:code/track
POST   /api/deliveries/:id/cancel
POST   /api/deliveries/:id/rate

// History
GET    /api/deliveries/history
```

---

## 5. Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„ (Security & Compliance)

### 5.1 Ø­Ù…Ø§ÙŠØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
- ØªØ´ÙÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø³Ø© (AES-256)
- Ø¥Ø®ÙØ§Ø¡ Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø¬Ø²Ø¦ÙŠØ§Ù‹
- Ø­Ø°Ù Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ø¹Ø¯ 30 ÙŠÙˆÙ…

### 5.2 Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©
- OCR Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù‚ÙˆÙ…ÙŠØ©
- Face matching Ø¨ÙŠÙ† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ø¨Ø·Ø§Ù‚Ø©
- Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ (OTP)

### 5.3 Ø£Ù…Ø§Ù† Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ©
- PCI DSS compliance
- Tokenization Ù„Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
- 2FA Ù„Ù„Ø³Ø­ÙˆØ¨Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©

---

## 6. Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ (Timeline)

| Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ | Ø§Ù„Ù…Ù‡Ø§Ù… |
|---------|--------|
| 1-2 | Database Schema + Driver Registration |
| 3-4 | Location Services + Matching Algorithm |
| 5-6 | Order Flow + Status Management |
| 7-8 | Live Tracking + Maps Integration |
| 9-10 | Payment & Wallet System |
| 11-12 | Driver App (React Native) |
| 13-14 | Customer Tracking Interface |
| 15-16 | Testing + Performance Optimization |

---

## 7. Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù†Ø¬Ø§Ø­ (Success Metrics)

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„Ù‡Ø¯Ù (Ø´Ù‡Ø± 3) | Ø§Ù„Ù‡Ø¯Ù (Ø´Ù‡Ø± 6) |
|---------|---------------|---------------|
| Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù…Ø³Ø¬Ù„ÙŠÙ† | 500 | 2000 |
| ØªÙˆØµÙŠÙ„Ø§Øª ÙŠÙˆÙ…ÙŠØ© | 100 | 1000 |
| Ù…ØªÙˆØ³Ø· ÙˆÙ‚Øª Ø§Ù„ØªØ¹ÙŠÙŠÙ† | < 5 Ø¯Ù‚Ø§Ø¦Ù‚ | < 3 Ø¯Ù‚Ø§Ø¦Ù‚ |
| Ù†Ø³Ø¨Ø© Ù†Ø¬Ø§Ø­ Ø§Ù„ØªÙˆØµÙŠÙ„ | 95% | 98% |
| ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† | 4.5+ | 4.7+ |
| Ø±Ø¶Ø§ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ (NPS) | 40+ | 60+ |

---

## 8. ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ø®Ø§Ø·Ø± (Risk Assessment)

| Ø§Ù„Ù…Ø®Ø§Ø·Ø± | Ø§Ù„Ø§Ø­ØªÙ…Ø§Ù„ | Ø§Ù„ØªØ£Ø«ÙŠØ± | Ø®Ø·Ø© Ø§Ù„ØªØ®ÙÙŠÙ |
|---------|----------|---------|-------------|
| Ù†Ù‚Øµ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† ÙÙŠ Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø°Ø±ÙˆØ© | Ø¹Ø§Ù„ÙŠ | Ø¹Ø§Ù„ÙŠ | Ø­ÙˆØ§ÙØ² Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© (surge pricing)ØŒ Ø¬Ø¯ÙˆÙ„Ø© Ù…Ø³Ø¨Ù‚Ø©ØŒ Ø´Ø±Ø§ÙƒØ§Øª Ù…Ø¹ Ø´Ø±ÙƒØ§Øª ØªÙˆØµÙŠÙ„ |
| Ø­ÙˆØ§Ø¯Ø« Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªÙˆØµÙŠÙ„ | Ù…Ù†Ø®ÙØ¶ | Ø¹Ø§Ù„ÙŠ | ØªØ£Ù…ÙŠÙ† Ø¥Ù„Ø²Ø§Ù…ÙŠØŒ ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ø³Ù„Ø§Ù…Ø©ØŒ GPS tracking |
| Ø³Ø±Ù‚Ø© Ø£Ùˆ ØªÙ„Ù Ø§Ù„Ø·Ù„Ø¨Ø§Øª | Ù…Ù†Ø®ÙØ¶ | Ø¹Ø§Ù„ÙŠ | ØªØ£Ù…ÙŠÙ† Ø§Ù„Ø´Ø­Ù†Ø§ØªØŒ ØªÙˆØ«ÙŠÙ‚ Ø¨Ø§Ù„ØµÙˆØ±ØŒ Ù†Ø¸Ø§Ù… Ø¶Ù…Ø§Ù† |
| ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø³Ù„Ø¨ÙŠØ© Ù…Ø²ÙŠÙØ© | Ù…ØªÙˆØ³Ø· | Ù…ØªÙˆØ³Ø· | Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©ØŒ Ø®ÙˆØ§Ø±Ø²Ù…ÙŠØ© ÙƒØ´Ù Ø§Ù„ØªÙ„Ø§Ø¹Ø¨ |
| Ø§Ù†Ø³Ø­Ø§Ø¨ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯ Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨ | Ù…ØªÙˆØ³Ø· | Ø¹Ø§Ù„ÙŠ | Ø¹Ù‚ÙˆØ¨Ø§ØªØŒ Ù†Ø¸Ø§Ù… Ø³Ù…Ø¹Ø©ØŒ Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø³Ø±ÙŠØ¹ |
| Ù…Ø´Ø§ÙƒÙ„ Ù‚Ø§Ù†ÙˆÙ†ÙŠØ© (ØªØµÙ†ÙŠÙ Ø§Ù„Ø¹Ù…Ø§Ù„Ø©) | Ù…Ù†Ø®ÙØ¶ | Ø¹Ø§Ù„ÙŠ | Ø¹Ù‚ÙˆØ¯ ÙˆØ§Ø¶Ø­Ø©ØŒ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‚Ø§Ù†ÙˆÙ†ÙŠØ©ØŒ Ù†Ù…ÙˆØ°Ø¬ Ø´Ø±Ø§ÙƒØ© ÙˆÙ„ÙŠØ³ ØªÙˆØ¸ÙŠÙ |

---

## 9. Ø®Ø·Ø© Ø§Ù„Ø·ÙˆØ§Ø±Ø¦ (Contingency Plan)

### 9.1 Ù…Ø§Ø°Ø§ Ù„Ùˆ Ù„Ù… ÙŠØªÙˆÙØ± Ø³Ø§Ø¦Ù‚ØŸ
```
Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø·Ù„Ø¨ Ø¹Ø§Ø¬Ù„ ÙˆÙ„Ø§ ÙŠÙˆØ¬Ø¯ Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù…ØªØ§Ø­ÙŠÙ†
Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª:
1. ØªÙˆØ³ÙŠØ¹ Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¨Ø­Ø« ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ (+2 ÙƒÙ… ÙƒÙ„ Ø¯Ù‚ÙŠÙ‚Ø©)
2. Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø­Ø§ÙØ² ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø­ØªÙ‰ 2x
3. Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·ÙŠÙ† "Ø·Ù„Ø¨ Ø¹Ø§Ø¬Ù„ Ø¨Ø­Ø§ÙØ² Ù…Ø¶Ø§Ø¹Ù"
4. Ø¨Ø¹Ø¯ 10 Ø¯Ù‚Ø§Ø¦Ù‚: ØªØ­ÙˆÙŠÙ„ Ù„Ø´Ø±ÙŠÙƒ ØªÙˆØµÙŠÙ„ Ø®Ø§Ø±Ø¬ÙŠ (Bosta/J&T)
5. Ø¥Ø¨Ù„Ø§Øº Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¨Ø§Ù„ØªØ£Ø®ÙŠØ± + Ø®ØµÙ… 15% ØªØ¹ÙˆÙŠØ¶ÙŠ
```

### 9.2 Ù…Ø§Ø°Ø§ Ù„Ùˆ Ø£Ù„ØºÙ‰ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø¨Ø¹Ø¯ Ø§Ù„Ù‚Ø¨ÙˆÙ„ØŸ
```
Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù‚Ø¨Ù„ Ø«Ù… Ø£Ù„ØºÙ‰ Ø£Ùˆ Ù„Ù… ÙŠØ³ØªØ¬Ø¨
Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª:
1. Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙÙˆØ±ÙŠØ© (< 30 Ø«Ø§Ù†ÙŠØ©)
2. Ø®ØµÙ… Ù…Ù† Ø±ØµÙŠØ¯ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ù…Ù„ØºÙŠ
3. Ø¥Ø´Ø¹Ø§Ø± Ø§Ù„Ø¹Ù…ÙŠÙ„ "ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„Ø³Ø§Ø¦Ù‚"
4. Ø¥Ø°Ø§ ØªÙƒØ±Ø± 3 Ù…Ø±Ø§Øª: Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø³Ø§Ø¦Ù‚ Ù…Ø¤Ù‚ØªØ§Ù‹
```

### 9.3 Ù…Ø§Ø°Ø§ Ù„Ùˆ Ø¶Ø§Ø¹ Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ ØªØ¶Ø±Ø±ØŸ
```
Ø§Ù„Ø³ÙŠÙ†Ø§Ø±ÙŠÙˆ: Ø§Ù„Ø·Ù„Ø¨ Ù„Ù… ÙŠØµÙ„ Ø£Ùˆ ÙˆØµÙ„ ØªØ§Ù„ÙØ§Ù‹
Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª:
1. ØªØ­Ù‚ÙŠÙ‚ ÙÙˆØ±ÙŠ (GPS history, ØµÙˆØ± Ø§Ù„ØªØ³Ù„ÙŠÙ…)
2. Ø¥Ø°Ø§ Ø®Ø·Ø£ Ø§Ù„Ø³Ø§Ø¦Ù‚: Ø®ØµÙ… Ù…Ù† Ù…Ø­ÙØ¸ØªÙ‡ + ØªØ­Ø°ÙŠØ±
3. Ø¥Ø°Ø§ Ø®Ø·Ø£ Ø§Ù„ØªØ§Ø¬Ø±: Ù…Ø·Ø§Ù„Ø¨Ø© Ø§Ù„ØªØ§Ø¬Ø±
4. ØªØ¹ÙˆÙŠØ¶ Ø§Ù„Ø¹Ù…ÙŠÙ„ ÙÙˆØ±Ø§Ù‹ (Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø·Ù„Ø¨ Ø£Ùˆ Ø±Ø¯ Ø§Ù„Ù…Ø¨Ù„Øº)
5. ØªÙØ¹ÙŠÙ„ Ø§Ù„ØªØ£Ù…ÙŠÙ† Ø¥Ø°Ø§ Ù„Ø²Ù…
```

---

## 10. Ù…Ø¤Ø´Ø±Ø§Øª Ø£Ø¯Ø§Ø¡ Ø¥Ø¶Ø§ÙÙŠØ© (Additional KPIs)

| Ø§Ù„Ù…Ù‚ÙŠØ§Ø³ | Ø§Ù„ØªØ¹Ø±ÙŠÙ | Ø§Ù„Ù‡Ø¯Ù | Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ |
|---------|---------|-------|--------------|
| **ØªÙƒÙ„ÙØ© Ø§ÙƒØªØ³Ø§Ø¨ Ø³Ø§Ø¦Ù‚ (DAC)** | ØªÙƒÙ„ÙØ© Ø¬Ù„Ø¨ Ø³Ø§Ø¦Ù‚ Ø¬Ø¯ÙŠØ¯ | < 100 Ø¬.Ù… | Ø¥Ø¬Ù…Ø§Ù„ÙŠ ØªÙƒØ§Ù„ÙŠÙ Ø§Ù„ØªÙˆØ¸ÙŠÙ Ã· Ø³Ø§Ø¦Ù‚ÙŠÙ† Ø¬Ø¯Ø¯ |
| **Ù…Ø¹Ø¯Ù„ Ø§Ø­ØªÙØ§Ø¸ Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ†** | Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù†Ø´Ø·ÙŠÙ† Ø¨Ø¹Ø¯ 3 Ø£Ø´Ù‡Ø± | > 60% | Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù†Ø´Ø·ÙŠÙ† Ã· Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† |
| **ØªÙƒÙ„ÙØ© Ù„ÙƒÙ„ ØªÙˆØµÙŠÙ„** | Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªØ´ØºÙŠÙ„ÙŠØ© | < 8 Ø¬.Ù… | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙƒØ§Ù„ÙŠÙ Ã· Ø¹Ø¯Ø¯ Ø§Ù„ØªÙˆØµÙŠÙ„Ø§Øª |
| **Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø£ÙˆÙ„** | Ù†Ø¬Ø§Ø­ Ø§Ù„ØªØ¹ÙŠÙŠÙ† Ù…Ù† Ø£ÙˆÙ„ Ù…Ø­Ø§ÙˆÙ„Ø© | > 80% | ØªØ¹ÙŠÙŠÙ†Ø§Øª Ù†Ø§Ø¬Ø­Ø© Ø£ÙˆÙ„Ù‰ Ã· Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø·Ù„Ø¨Ø§Øª |
| **Ø¯Ø®Ù„ Ø§Ù„Ø³Ø§Ø¦Ù‚ Ø§Ù„Ø´Ù‡Ø±ÙŠ** | Ù…ØªÙˆØ³Ø· Ø¯Ø®Ù„ Ø§Ù„Ø³Ø§Ø¦Ù‚ | > 4000 Ø¬.Ù… | Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù…Ø¯ÙÙˆØ¹Ø§Øª Ã· Ø³Ø§Ø¦Ù‚ÙŠÙ† Ù†Ø´Ø·ÙŠÙ† |
| **Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰** | Ø´ÙƒØ§ÙˆÙ‰ Ù„ÙƒÙ„ 1000 ØªÙˆØµÙŠÙ„ | < 5 | Ø´ÙƒØ§ÙˆÙ‰ Ã· ØªÙˆØµÙŠÙ„Ø§Øª Ã— 1000 |
| **LTV:DAC Ratio** | ÙƒÙØ§Ø¡Ø© Ø§Ø³ØªØ«Ù…Ø§Ø± Ø§Ù„Ø³Ø§Ø¦Ù‚ÙŠÙ† | > 10:1 | Ø¥ÙŠØ±Ø§Ø¯Ø§Øª Ù…Ù† Ø§Ù„Ø³Ø§Ø¦Ù‚ Ã· ØªÙƒÙ„ÙØ© Ø§ÙƒØªØ³Ø§Ø¨Ù‡ |

---

**Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù…Ø³ØªÙ†Ø¯**
